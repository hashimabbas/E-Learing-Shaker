import{c as Ee,r as me,a as Le,j as s,b as ue,H as He}from"./app-XyPvf5SD.js";import{A as Be,a as Pe,b as Oe,S as Ve,G as $e,c as qe}from"./app-layout-D2vXKArG.js";import{B as Ne}from"./button-CHjdATuu.js";import{d as _e,S as Te,a as Ae,b as Ie,c as m}from"./select-DXWgw4Bs.js";import{I as de}from"./input-BV9Sw1oX.js";import{C as Ge,d as Je,a as Qe,b as ze,c as We}from"./card-DkM8ndGh.js";import{b as Xe,T as Ue,c as he,a as fe,d as Ke,e as Ye}from"./table-DkIE2388.js";import{D as Ze,a as es,b as ss,c as ls,d as Me,e as ye,X as ts}from"./sheet-B0klKXIZ.js";import{B as as}from"./badge-Dj0IGrYk.js";import{L as rs}from"./pagination-XQSj6T29.js";import{f as is,a as os,D as ns,b as cs,c as ms,d as ds,e as hs}from"./dialog-DVQQso0b.js";import{L as xe}from"./label-BpwVjim5.js";import{I as pe}from"./input-error-CAcKI3aG.js";import{P as fs}from"./plus-Dd01nnhN.js";import{S as xs}from"./search-B5GzQm7C.js";import{U as ps}from"./user-7Gzfl5ea.js";import{E as us}from"./ellipsis-G10GnHPP.js";import{C as js}from"./check-Xg2CJPvX.js";import{T as gs}from"./trash-2-xTfAiMki.js";/* empty css            */import"./index-BfGo3Iya.js";import"./index-fzUbA7uZ.js";import"./index-Dc5gxj5P.js";import"./sparkles-Q-DkQsKb.js";import"./chevron-right-Cm5lg-zA.js";import"./index-4OZETurI.js";import"./chevron-down-DVb0I32W.js";import"./chevron-left-BcmhxqN8.js";const vs=n=>n.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);function Xs(n){const e=Ee.c(107),{users:d,filters:P}=n,[c,Re]=me.useState(P.role||"all"),[a,ke]=me.useState(P.search||""),[je,Ce]=me.useState(!1);let O;e[0]===Symbol.for("react.memo_cache_sentinel")?(O={name:"",email:"",password:"",role:"student"},e[0]=O):O=e[0];const{data:r,setData:i,post:ge,processing:V,errors:o,reset:ve}=Le(O);let $;e[1]!==ge||e[2]!==ve?($=l=>{l.preventDefault(),ge(route("admin.users.store"),{onSuccess:()=>{Ce(!1),ve()}})},e[1]=ge,e[2]=ve,e[3]=$):$=e[3];const be=$;let q;e[4]!==P.search||e[5]!==a||e[6]!==c?(q=()=>{const l=setTimeout(()=>{a!==(P.search||"")&&ue.get(route("admin.users.index"),{role:c==="all"?void 0:c,search:a||void 0},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(l)},e[4]=P.search,e[5]=a,e[6]=c,e[7]=q):q=e[7];let G;e[8]!==a?(G=[a],e[8]=a,e[9]=G):G=e[9],me.useEffect(q,G);let J;e[10]!==a?(J=l=>{Re(l),ue.get(route("admin.users.index"),{role:l==="all"?void 0:l,search:a||void 0},{preserveState:!0})},e[10]=a,e[11]=J):J=e[11];const Se=J,De=Ss,Fe=bs;let Q;e[12]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(He,{title:"User Management"}),e[12]=Q):Q=e[12];let z;e[13]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"User Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage users, roles, and permissions."})]}),e[13]=z):z=e[13];let W;e[14]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsx(is,{asChild:!0,children:s.jsxs(Ne,{className:"font-bold",children:[s.jsx(fs,{className:"mr-2 h-4 w-4"})," Create User"]})}),e[14]=W):W=e[14];let X;e[15]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsxs(os,{children:[s.jsx(ns,{children:"Create New User"}),s.jsx(cs,{children:"Add a new user to the platform. They will be auto-verified."})]}),e[15]=X):X=e[15];let K;e[16]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx(xe,{htmlFor:"create-name",children:"Full Name"}),e[16]=K):K=e[16];let h;e[17]!==i?(h=l=>i("name",l.target.value),e[17]=i,e[18]=h):h=e[18];let f;e[19]!==r.name||e[20]!==h?(f=s.jsx(de,{id:"create-name",value:r.name,onChange:h,placeholder:"John Doe",required:!0}),e[19]=r.name,e[20]=h,e[21]=f):f=e[21];let x;e[22]!==o.name?(x=s.jsx(pe,{message:o.name}),e[22]=o.name,e[23]=x):x=e[23];let p;e[24]!==f||e[25]!==x?(p=s.jsxs("div",{className:"grid gap-2",children:[K,f,x]}),e[24]=f,e[25]=x,e[26]=p):p=e[26];let Y;e[27]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(xe,{htmlFor:"create-email",children:"Email Address"}),e[27]=Y):Y=e[27];let u;e[28]!==i?(u=l=>i("email",l.target.value),e[28]=i,e[29]=u):u=e[29];let j;e[30]!==r.email||e[31]!==u?(j=s.jsx(de,{id:"create-email",type:"email",value:r.email,onChange:u,placeholder:"john@example.com",required:!0}),e[30]=r.email,e[31]=u,e[32]=j):j=e[32];let g;e[33]!==o.email?(g=s.jsx(pe,{message:o.email}),e[33]=o.email,e[34]=g):g=e[34];let v;e[35]!==j||e[36]!==g?(v=s.jsxs("div",{className:"grid gap-2",children:[Y,j,g]}),e[35]=j,e[36]=g,e[37]=v):v=e[37];let Z;e[38]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx(xe,{htmlFor:"create-password",children:"Initial Password"}),e[38]=Z):Z=e[38];let b;e[39]!==i?(b=l=>i("password",l.target.value),e[39]=i,e[40]=b):b=e[40];let S;e[41]!==r.password||e[42]!==b?(S=s.jsx(de,{id:"create-password",type:"password",value:r.password,onChange:b,required:!0}),e[41]=r.password,e[42]=b,e[43]=S):S=e[43];let w;e[44]!==o.password?(w=s.jsx(pe,{message:o.password}),e[44]=o.password,e[45]=w):w=e[45];let N;e[46]!==S||e[47]!==w?(N=s.jsxs("div",{className:"grid gap-2",children:[Z,S,w]}),e[46]=S,e[47]=w,e[48]=N):N=e[48];let ee;e[49]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx(xe,{htmlFor:"create-role",children:"Role"}),e[49]=ee):ee=e[49];let y;e[50]!==i?(y=l=>i("role",l),e[50]=i,e[51]=y):y=e[51];let se;e[52]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx(Te,{id:"create-role",children:s.jsx(Ae,{placeholder:"Select role"})}),e[52]=se):se=e[52];let le;e[53]===Symbol.for("react.memo_cache_sentinel")?(le=s.jsxs(Ie,{children:[s.jsx(m,{value:"student",children:"Student"}),s.jsx(m,{value:"instructor",children:"Instructor"}),s.jsx(m,{value:"admin",children:"Admin"})]}),e[53]=le):le=e[53];let C;e[54]!==r.role||e[55]!==y?(C=s.jsxs(_e,{onValueChange:y,defaultValue:r.role,children:[se,le]}),e[54]=r.role,e[55]=y,e[56]=C):C=e[56];let D;e[57]!==o.role?(D=s.jsx(pe,{message:o.role}),e[57]=o.role,e[58]=D):D=e[58];let _;e[59]!==C||e[60]!==D?(_=s.jsxs("div",{className:"grid gap-2",children:[ee,C,D]}),e[59]=C,e[60]=D,e[61]=_):_=e[61];let T;e[62]!==p||e[63]!==v||e[64]!==N||e[65]!==_?(T=s.jsxs("div",{className:"grid gap-4 py-4",children:[p,v,N,_]}),e[62]=p,e[63]=v,e[64]=N,e[65]=_,e[66]=T):T=e[66];const we=V?"Creating...":"Create User";let A;e[67]!==V||e[68]!==we?(A=s.jsx(ms,{children:s.jsx(Ne,{type:"submit",disabled:V,className:"w-full",children:we})}),e[67]=V,e[68]=we,e[69]=A):A=e[69];let I;e[70]!==be||e[71]!==T||e[72]!==A?(I=s.jsx(ds,{className:"sm:max-w-[425px]",children:s.jsxs("form",{onSubmit:be,children:[X,T,A]})}),e[70]=be,e[71]=T,e[72]=A,e[73]=I):I=e[73];let U;e[74]!==je||e[75]!==I?(U=s.jsxs("div",{className:"flex items-center justify-between space-y-2",children:[z,s.jsxs(hs,{open:je,onOpenChange:Ce,children:[W,I]})]}),e[74]=je,e[75]=I,e[76]=U):U=e[76];let te;e[77]===Symbol.for("react.memo_cache_sentinel")?(te=s.jsxs("div",{children:[s.jsx(Ge,{children:"Users Directory"}),s.jsx(Je,{children:"A list of all registered users in the platform."})]}),e[77]=te):te=e[77];let ae;e[78]===Symbol.for("react.memo_cache_sentinel")?(ae=s.jsx(xs,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e[78]=ae):ae=e[78];let re;e[79]===Symbol.for("react.memo_cache_sentinel")?(re=l=>ke(l.target.value),e[79]=re):re=e[79];let M;e[80]!==a?(M=s.jsxs("div",{className:"relative w-full md:w-64",children:[ae,s.jsx(de,{type:"search",placeholder:"Search by name or email...",className:"pl-8",value:a,onChange:re})]}),e[80]=a,e[81]=M):M=e[81];let ie;e[82]===Symbol.for("react.memo_cache_sentinel")?(ie=s.jsx(Te,{className:"w-[150px]",children:s.jsx(Ae,{placeholder:"Role"})}),e[82]=ie):ie=e[82];let oe;e[83]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsxs(Ie,{children:[s.jsx(m,{value:"all",children:"All Roles"}),s.jsx(m,{value:"student",children:"Student"}),s.jsx(m,{value:"instructor",children:"Instructor"}),s.jsx(m,{value:"admin",children:"Admin"})]}),e[83]=oe):oe=e[83];let R;e[84]!==Se||e[85]!==c?(R=s.jsxs(_e,{onValueChange:Se,value:c,children:[ie,oe]}),e[84]=Se,e[85]=c,e[86]=R):R=e[86];let k;e[87]!==M||e[88]!==R?(k=s.jsx(Qe,{children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[te,s.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[M,R]})]})}),e[87]=M,e[88]=R,e[89]=k):k=e[89];let ne;e[90]===Symbol.for("react.memo_cache_sentinel")?(ne=s.jsx(Xe,{children:s.jsxs(Ue,{children:[s.jsx(he,{children:"User"}),s.jsx(he,{children:"Role"}),s.jsx(he,{className:"hidden md:table-cell",children:"Joined"}),s.jsx(he,{className:"text-right",children:"Actions"})]})}),e[90]=ne):ne=e[90];let F;if(e[91]!==d.data){let l;e[93]===Symbol.for("react.memo_cache_sentinel")?(l=t=>s.jsxs(Ue,{children:[s.jsx(fe,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(Be,{children:[s.jsx(Pe,{src:t.profile_photo_url,alt:t.name}),s.jsx(Oe,{children:vs(t.name)})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:t.name}),s.jsx("span",{className:"text-xs text-muted-foreground",children:t.email})]})]})}),s.jsx(fe,{children:s.jsxs(as,{variant:t.role==="admin"?"destructive":t.role==="instructor"?"default":"secondary",className:t.role==="instructor"?"bg-indigo-500 hover:bg-indigo-600":"",children:[t.role==="admin"&&s.jsx(Ve,{className:"w-3 h-3 mr-1"}),t.role==="instructor"&&s.jsx($e,{className:"w-3 h-3 mr-1"}),t.role==="student"&&s.jsx(ps,{className:"w-3 h-3 mr-1"}),s.jsx("span",{className:"capitalize",children:t.role})]})}),s.jsx(fe,{className:"hidden md:table-cell text-muted-foreground text-sm",children:new Date(t.created_at).toLocaleDateString()}),s.jsx(fe,{className:"text-right",children:s.jsxs(Ze,{children:[s.jsx(es,{asChild:!0,children:s.jsxs(Ne,{variant:"ghost",className:"h-8 w-8 p-0",children:[s.jsx("span",{className:"sr-only",children:"Open menu"}),s.jsx(us,{className:"h-4 w-4"})]})}),s.jsxs(ss,{align:"end",children:[s.jsx(ls,{children:"Actions"}),s.jsx(Me,{}),t.role==="student"?s.jsxs(ye,{onClick:()=>De(t,"instructor"),children:[s.jsx(js,{className:"mr-2 h-4 w-4"})," Promote to Instructor"]}):s.jsxs(ye,{onClick:()=>De(t,"student"),children:[s.jsx(ts,{className:"mr-2 h-4 w-4"})," Demote to Student"]}),s.jsx(Me,{}),s.jsxs(ye,{onClick:()=>Fe(t),className:"text-red-600 focus:text-red-600",children:[s.jsx(gs,{className:"mr-2 h-4 w-4"})," Delete User"]})]})]})})]},t.id),e[93]=l):l=e[93],F=d.data.map(l),e[91]=d.data,e[92]=F}else F=e[92];let E;e[94]!==F?(E=s.jsxs(Ke,{children:[ne,s.jsx(Ye,{children:F})]}),e[94]=F,e[95]=E):E=e[95];let L;e[96]!==d.links?(L=s.jsx("div",{className:"mt-4",children:s.jsx(rs,{links:d.links})}),e[96]=d.links,e[97]=L):L=e[97];let H;e[98]!==E||e[99]!==L?(H=s.jsxs(ze,{children:[E,L]}),e[98]=E,e[99]=L,e[100]=H):H=e[100];let B;e[101]!==k||e[102]!==H?(B=s.jsxs(We,{children:[k,H]}),e[101]=k,e[102]=H,e[103]=B):B=e[103];let ce;return e[104]!==U||e[105]!==B?(ce=s.jsxs(qe,{children:[Q,s.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 pt-0",children:[U,B]})]}),e[104]=U,e[105]=B,e[106]=ce):ce=e[106],ce}function bs(n){confirm(`WARNING: This will permanently delete ${n.name}. Are you sure?`)&&ue.delete(route("admin.users.destroy",n.id),{preserveScroll:!0})}function Ss(n,e){confirm(`Are you sure you want to change ${n.name}'s role to ${e}?`)&&ue.patch(route("admin.users.update",n.id),{name:n.name,email:n.email,role:e},{preserveScroll:!0})}export{Xs as default};
