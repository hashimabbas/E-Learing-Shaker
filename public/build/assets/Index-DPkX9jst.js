import{c as F,r as M,j as s,b as R,H as P}from"./app-Bec2ok86.js";import{A as Q,a as V,b as z,S as J,G as O,c as W}from"./app-layout-BPpfgwNJ.js";import{B as X}from"./button-QAXgbhiX.js";import{S as q,a as K,b as Y,c as D,d as Z}from"./select-BAqXJ5YB.js";import{I as ee}from"./input-qIZms2my.js";import{C as se,d as te,a as le,b as ae,c as re}from"./card-BM_LN4GI.js";import{b as ie,T as B,c as k,a as I,d as ne,e as oe}from"./table-BK2W-w1A.js";import{D as ce,a as me,b as de,c as he,d as H,e as E,X as xe}from"./sheet-NvO0UwYy.js";import{B as fe}from"./badge-vHaOSYEg.js";import{L as pe}from"./pagination-NdACWm9X.js";import{S as je}from"./search-CUK9k6zo.js";import{U as ue}from"./user-B0BJROtB.js";import{E as ge}from"./ellipsis-UHvBbuMl.js";import{C as ve}from"./check-BM_aWkjR.js";import{T as Ne}from"./trash-2-D72x638Q.js";/* empty css            */import"./index-n-fuJWor.js";import"./index-BELOA6Y-.js";import"./index-Dc5gxj5P.js";import"./users-l_r1u_4P.js";import"./index-C2BoK4gj.js";import"./chevron-down-pLkzWxws.js";import"./chevron-left-D74jzpN0.js";const be=r=>r.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2);function Oe(r){const e=F.c(37),{users:n,filters:p}=r,[i,L]=M.useState(p.role||"all"),[l,$]=M.useState(p.search||"");let j;e[0]!==p.search||e[1]!==l||e[2]!==i?(j=()=>{const a=setTimeout(()=>{l!==(p.search||"")&&R.get(route("admin.users.index"),{role:i==="all"?void 0:i,search:l||void 0},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(a)},e[0]=p.search,e[1]=l,e[2]=i,e[3]=j):j=e[3];let u;e[4]!==l?(u=[l],e[4]=l,e[5]=u):u=e[5],M.useEffect(j,u);let g;e[6]!==l?(g=a=>{L(a),R.get(route("admin.users.index"),{role:a==="all"?void 0:a,search:l||void 0},{preserveState:!0})},e[6]=l,e[7]=g):g=e[7];const U=g,_=we,G=Se;let v;e[8]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsx(P,{title:"User Management"}),e[8]=v):v=e[8];let N;e[9]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx("div",{className:"flex items-center justify-between space-y-2",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"User Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage users, roles, and permissions."})]})}),e[9]=N):N=e[9];let b;e[10]===Symbol.for("react.memo_cache_sentinel")?(b=s.jsxs("div",{children:[s.jsx(se,{children:"Users Directory"}),s.jsx(te,{children:"A list of all registered users in the platform."})]}),e[10]=b):b=e[10];let S;e[11]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(je,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),e[11]=S):S=e[11];let w;e[12]===Symbol.for("react.memo_cache_sentinel")?(w=a=>$(a.target.value),e[12]=w):w=e[12];let o;e[13]!==l?(o=s.jsxs("div",{className:"relative w-full md:w-64",children:[S,s.jsx(ee,{type:"search",placeholder:"Search by name or email...",className:"pl-8",value:l,onChange:w})]}),e[13]=l,e[14]=o):o=e[14];let y;e[15]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(q,{className:"w-[150px]",children:s.jsx(K,{placeholder:"Role"})}),e[15]=y):y=e[15];let C;e[16]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsxs(Y,{children:[s.jsx(D,{value:"all",children:"All Roles"}),s.jsx(D,{value:"student",children:"Student"}),s.jsx(D,{value:"instructor",children:"Instructor"}),s.jsx(D,{value:"admin",children:"Admin"})]}),e[16]=C):C=e[16];let c;e[17]!==U||e[18]!==i?(c=s.jsxs(Z,{onValueChange:U,value:i,children:[y,C]}),e[17]=U,e[18]=i,e[19]=c):c=e[19];let m;e[20]!==c||e[21]!==o?(m=s.jsx(le,{children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[b,s.jsxs("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[o,c]})]})}),e[20]=c,e[21]=o,e[22]=m):m=e[22];let T;e[23]===Symbol.for("react.memo_cache_sentinel")?(T=s.jsx(ie,{children:s.jsxs(B,{children:[s.jsx(k,{children:"User"}),s.jsx(k,{children:"Role"}),s.jsx(k,{className:"hidden md:table-cell",children:"Joined"}),s.jsx(k,{className:"text-right",children:"Actions"})]})}),e[23]=T):T=e[23];let d;if(e[24]!==n.data){let a;e[26]===Symbol.for("react.memo_cache_sentinel")?(a=t=>s.jsxs(B,{children:[s.jsx(I,{children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs(Q,{children:[s.jsx(V,{src:t.profile_photo_url,alt:t.name}),s.jsx(z,{children:be(t.name)})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:t.name}),s.jsx("span",{className:"text-xs text-muted-foreground",children:t.email})]})]})}),s.jsx(I,{children:s.jsxs(fe,{variant:t.role==="admin"?"destructive":t.role==="instructor"?"default":"secondary",className:t.role==="instructor"?"bg-indigo-500 hover:bg-indigo-600":"",children:[t.role==="admin"&&s.jsx(J,{className:"w-3 h-3 mr-1"}),t.role==="instructor"&&s.jsx(O,{className:"w-3 h-3 mr-1"}),t.role==="student"&&s.jsx(ue,{className:"w-3 h-3 mr-1"}),s.jsx("span",{className:"capitalize",children:t.role})]})}),s.jsx(I,{className:"hidden md:table-cell text-muted-foreground text-sm",children:new Date(t.created_at).toLocaleDateString()}),s.jsx(I,{className:"text-right",children:s.jsxs(ce,{children:[s.jsx(me,{asChild:!0,children:s.jsxs(X,{variant:"ghost",className:"h-8 w-8 p-0",children:[s.jsx("span",{className:"sr-only",children:"Open menu"}),s.jsx(ge,{className:"h-4 w-4"})]})}),s.jsxs(de,{align:"end",children:[s.jsx(he,{children:"Actions"}),s.jsx(H,{}),t.role==="student"?s.jsxs(E,{onClick:()=>_(t,"instructor"),children:[s.jsx(ve,{className:"mr-2 h-4 w-4"})," Promote to Instructor"]}):s.jsxs(E,{onClick:()=>_(t,"student"),children:[s.jsx(xe,{className:"mr-2 h-4 w-4"})," Demote to Student"]}),s.jsx(H,{}),s.jsxs(E,{onClick:()=>G(t),className:"text-red-600 focus:text-red-600",children:[s.jsx(Ne,{className:"mr-2 h-4 w-4"})," Delete User"]})]})]})})]},t.id),e[26]=a):a=e[26],d=n.data.map(a),e[24]=n.data,e[25]=d}else d=e[25];let h;e[27]!==d?(h=s.jsxs(ne,{children:[T,s.jsx(oe,{children:d})]}),e[27]=d,e[28]=h):h=e[28];let x;e[29]!==n.links?(x=s.jsx("div",{className:"mt-4",children:s.jsx(pe,{links:n.links})}),e[29]=n.links,e[30]=x):x=e[30];let f;e[31]!==h||e[32]!==x?(f=s.jsxs(ae,{children:[h,x]}),e[31]=h,e[32]=x,e[33]=f):f=e[33];let A;return e[34]!==m||e[35]!==f?(A=s.jsxs(W,{children:[v,s.jsxs("div",{className:"flex flex-1 flex-col gap-4 p-4 pt-0",children:[N,s.jsxs(re,{children:[m,f]})]})]}),e[34]=m,e[35]=f,e[36]=A):A=e[36],A}function Se(r){confirm(`WARNING: This will permanently delete ${r.name}. Are you sure?`)&&R.delete(route("admin.users.destroy",r.id),{preserveScroll:!0})}function we(r,e){confirm(`Are you sure you want to change ${r.name}'s role to ${e}?`)&&R.patch(route("admin.users.update",r.id),{name:r.name,email:r.email,role:e},{preserveScroll:!0})}export{Oe as default};
