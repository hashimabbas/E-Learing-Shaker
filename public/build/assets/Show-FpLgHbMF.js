import{d as Ne,c as Se,u as ke,r as me,a as Ce,j as s,H as ze,L as Le}from"./app-DLXp58lY.js";import{A as he,b as pe,c as Ee}from"./app-layout-qwVUl7-f.js";import{c as ge,B as be}from"./button-Lq4Z3ng-.js";import{b as xe,c as fe}from"./card-Bvty04dq.js";import{S as Ae}from"./separator-BfMA6PI0.js";import{T as Be}from"./textarea-GdMaThF9.js";import{I as Ie}from"./input-error-DvK2RVn6.js";import{s as je,M as Me}from"./sheet-B7B0G3N5.js";import{B as ue}from"./badge-CaFYj_kv.js";import{S as Re}from"./shield-check-2oBw0KoF.js";import{A as De}from"./arrow-left-uL07dyvj.js";import{E as Pe}from"./ellipsis-CNh0hdxe.js";import{C as $e}from"./clock-2iwgv53V.js";/* empty css            */import"./index-CAp-JKpQ.js";import"./index-DdU1g2Rd.js";import"./index-Dc5gxj5P.js";import"./book-open-Csfuoptl.js";import"./chevron-right-DoFHCW4K.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],He=Ne("Crown",Fe);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Te=Ne("Send",Oe);function cs(re){const e=Se.c(104),{discussion:t,course:a}=re,{auth:i}=ke().props,[l,ve]=me.useState(t.comments),we=me.useRef(null);let P;e[0]!==i.user||e[1]!==t.id?(P=()=>{if(i.user)return window.Echo.channel(`discussion.${t.id}`).listen(".comment.added",r=>{ve(_e=>[r.comment,..._e])}),()=>{window.Echo.leaveChannel(`discussion.${t.id}`)}},e[0]=i.user,e[1]=t.id,e[2]=P):P=e[2];let $;e[3]!==i.user.id||e[4]!==t.id?($=[t.id,i.user.id],e[3]=i.user.id,e[4]=t.id,e[5]=$):$=e[5],me.useEffect(P,$);let F;e[6]===Symbol.for("react.memo_cache_sentinel")?(F={content:""},e[6]=F):F=e[6];const{data:le,setData:ae,post:ie,processing:oe,errors:ne,reset:ce}=Ce(F);let H;e[7]!==t.id||e[8]!==ie||e[9]!==ce?(H=r=>{r.preventDefault(),ie(je("discussions.comment.add",t.id),{preserveScroll:!0,onSuccess:()=>{ce("content")}})},e[7]=t.id,e[8]=ie,e[9]=ce,e[10]=H):H=e[10];const de=H,O=qe;let T;e[11]!==t.user_id?(T=r=>r.id===t.user_id,e[11]=t.user_id,e[12]=T):T=e[12];const q=T;console.log(t.user.name);const ye=t.title;let o;e[13]!==t.title?(o=s.jsx(ze,{title:t.title}),e[13]=t.title,e[14]=o):o=e[14];let n;e[15]!==a.slug?(n=je("discussions.index",a.slug),e[15]=a.slug,e[16]=n):n=e[16];let G;e[17]===Symbol.for("react.memo_cache_sentinel")?(G=s.jsx("div",{className:"p-1 rounded-full bg-muted group-hover:bg-primary/10 mr-2 transition-colors",children:s.jsx(De,{className:"h-4 w-4 transition-transform group-hover:-translate-x-0.5"})}),e[17]=G):G=e[17];let c;e[18]!==a.title||e[19]!==n?(c=s.jsx("div",{className:"border-b bg-card py-6 sticky top-0 z-10 shadow-sm backdrop-blur-xl bg-card/80",children:s.jsx("div",{className:"container mx-auto px-4 max-w-4xl",children:s.jsxs(Le,{href:n,className:"flex items-center text-sm font-medium text-muted-foreground hover:text-primary transition-colors group",children:[G,"Back to ",a.title," Forum"]})})}),e[18]=a.title,e[19]=n,e[20]=c):c=e[20];let d;e[21]!==t.title?(d=s.jsx("h1",{className:"text-2xl sm:text-3xl font-black tracking-tight leading-tight text-foreground",children:t.title}),e[21]=t.title,e[22]=d):d=e[22];let J;e[23]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx(be,{variant:"ghost",size:"icon",className:"shrink-0 -mr-2",children:s.jsx(Pe,{className:"h-5 w-5 text-muted-foreground"})}),e[23]=J):J=e[23];let m;e[24]!==d?(m=s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[d,J]}),e[24]=d,e[25]=m):m=e[25];let x;e[26]!==t.user.name?(x=t.user.name.charAt(0),e[26]=t.user.name,e[27]=x):x=e[27];let f;e[28]!==x?(f=s.jsx(he,{className:"h-12 w-12 border-2 border-background shadow-sm",children:s.jsx(pe,{className:"bg-primary text-primary-foreground font-black text-lg",children:x})}),e[28]=x,e[29]=f):f=e[29];let u;e[30]!==t.user.name?(u=s.jsx("span",{className:"font-bold text-foreground text-lg",children:t.user.name}),e[30]=t.user.name,e[31]=u):u=e[31];let h;e[32]!==t.user?(h=O(t.user)&&s.jsxs(ue,{variant:"secondary",className:"bg-indigo-100 text-indigo-700 hover:bg-indigo-200 border-indigo-200 gap-1 pl-1 pr-2",children:[s.jsx(Re,{className:"h-3 w-3"})," Instructor"]}),e[32]=t.user,e[33]=h):h=e[33];let p;e[34]!==u||e[35]!==h?(p=s.jsxs("div",{className:"flex items-center gap-2",children:[u,h]}),e[34]=u,e[35]=h,e[36]=p):p=e[36];let K,Q;e[37]===Symbol.for("react.memo_cache_sentinel")?(K=s.jsx("span",{children:"Original Poster"}),Q=s.jsx("span",{children:"â€¢"}),e[37]=K,e[38]=Q):(K=e[37],Q=e[38]);let U;e[39]===Symbol.for("react.memo_cache_sentinel")?(U=s.jsx($e,{className:"h-3 w-3 mr-1"}),e[39]=U):U=e[39];let g;e[40]!==t.created_at?(g=new Date(t.created_at).toLocaleString(),e[40]=t.created_at,e[41]=g):g=e[41];let b;e[42]!==g?(b=s.jsxs("div",{className:"text-xs font-medium text-muted-foreground flex items-center gap-2 mt-0.5",children:[K,Q,s.jsxs("span",{className:"flex items-center",children:[U," ",g]})]}),e[42]=g,e[43]=b):b=e[43];let j;e[44]!==p||e[45]!==b?(j=s.jsxs("div",{children:[p,b]}),e[44]=p,e[45]=b,e[46]=j):j=e[46];let N;e[47]!==f||e[48]!==j?(N=s.jsxs("div",{className:"flex items-center gap-4 mt-6",children:[f,j]}),e[47]=f,e[48]=j,e[49]=N):N=e[49];let v;e[50]!==m||e[51]!==N?(v=s.jsxs("div",{className:"bg-primary/5 p-6 sm:p-8 border-b border-primary/10",children:[m,N]}),e[50]=m,e[51]=N,e[52]=v):v=e[52];let w;e[53]!==t.content?(w=s.jsx(xe,{className:"p-6 sm:p-8 text-lg leading-relaxed text-foreground/90 whitespace-pre-wrap",children:t.content}),e[53]=t.content,e[54]=w):w=e[54];let y;e[55]!==v||e[56]!==w?(y=s.jsxs(fe,{className:"border-none shadow-lg overflow-hidden ring-1 ring-muted",children:[v,w]}),e[55]=v,e[56]=w,e[57]=y):y=e[57];let V;e[58]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx("div",{className:"absolute left-10 top-full bottom-0 w-0.5 bg-muted-foreground/20 h-8 -mb-8 z-0 hidden sm:block"}),e[58]=V):V=e[58];let _;e[59]!==y?(_=s.jsxs("div",{className:"relative",children:[y,V]}),e[59]=y,e[60]=_):_=e[60];let W;e[61]===Symbol.for("react.memo_cache_sentinel")?(W=s.jsxs("h3",{className:"text-sm font-bold uppercase tracking-widest text-muted-foreground mb-4 flex items-center gap-2",children:[s.jsx(Me,{className:"h-4 w-4"})," Contribute to the conversation"]}),e[61]=W):W=e[61];let S;e[62]!==ae?(S=r=>ae("content",r.target.value),e[62]=ae,e[63]=S):S=e[63];let k;e[64]!==le.content||e[65]!==S?(k=s.jsx(Be,{placeholder:"Type your helpful reply here...",rows:4,value:le.content,onChange:S,className:"resize-none bg-background text-base p-4 pr-32 shadow-sm border-muted-foreground/20 focus-visible:ring-primary/20 min-h-[120px]"}),e[64]=le.content,e[65]=S,e[66]=k):k=e[66];let X;e[67]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx("span",{className:"text-xs text-muted-foreground font-medium hidden sm:inline-block mr-2",children:"Markdown supported"}),e[67]=X):X=e[67];let Y;e[68]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(Te,{className:"h-4 w-4 mr-2"}),e[68]=Y):Y=e[68];let C;e[69]!==oe?(C=s.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2",children:[X,s.jsxs(be,{type:"submit",disabled:oe,size:"sm",className:"rounded-lg font-bold shadow-lg shadow-primary/20 px-4",children:[Y,"Post Reply"]})]}),e[69]=oe,e[70]=C):C=e[70];let z;e[71]!==de||e[72]!==k||e[73]!==C?(z=s.jsxs("form",{onSubmit:de,className:"relative",children:[k,C]}),e[71]=de,e[72]=k,e[73]=C,e[74]=z):z=e[74];let L;e[75]!==ne.content?(L=s.jsx(Ie,{message:ne.content,className:"mt-2"}),e[75]=ne.content,e[76]=L):L=e[76];let E;e[77]!==z||e[78]!==L?(E=s.jsx(fe,{className:"border-2 border-muted/60 shadow-none bg-muted/10 relative z-1",children:s.jsxs(xe,{className:"p-4 sm:p-6",children:[W,z,L]})}),e[77]=z,e[78]=L,e[79]=E):E=e[79];let Z;e[80]===Symbol.for("react.memo_cache_sentinel")?(Z=s.jsx("div",{className:"absolute left-10 top-0 bottom-0 w-0.5 bg-muted-foreground/10 hidden sm:block"}),e[80]=Z):Z=e[80];let A;e[81]!==l.length?(A=s.jsxs("span",{className:"text-xl font-bold",children:[l.length," Replies"]}),e[81]=l.length,e[82]=A):A=e[82];let ee;e[83]===Symbol.for("react.memo_cache_sentinel")?(ee=s.jsx(Ae,{className:"flex-1"}),e[83]=ee):ee=e[83];let B;e[84]!==A?(B=s.jsxs("div",{className:"flex items-center gap-4 mb-2 relative z-1",children:[A,ee]}),e[84]=A,e[85]=B):B=e[85];let I;e[86]!==l||e[87]!==q?(I=l.length>0?l.map(r=>s.jsx("div",{className:"relative z-1 group",children:s.jsxs("div",{className:"flex gap-4 sm:gap-6",children:[s.jsx("div",{className:"hidden sm:flex flex-col items-center",children:s.jsx(he,{className:ge("h-10 w-10 border-2 shadow-sm z-10",O(r.user)?"border-indigo-100 ring-2 ring-indigo-50":"border-background",q(r.user)?"border-primary/20":""),children:s.jsx(pe,{className:ge("text-sm font-bold",O(r.user)?"bg-indigo-100 text-indigo-700":"bg-muted text-muted-foreground"),children:r.user.name.charAt(0)})})}),s.jsx(fe,{className:"flex-1 border-none shadow-sm hover:shadow-md transition-shadow ring-1 ring-muted bg-card",children:s.jsxs(xe,{className:"p-5",children:[s.jsx("div",{className:"flex items-start justify-between mb-3",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-bold text-sm",children:r.user.name}),O(r.user)&&s.jsx(ue,{variant:"secondary",className:"h-5 px-1.5 bg-indigo-50 text-indigo-700 border-indigo-100 text-[10px]",children:"Instructor"}),q(r.user)&&s.jsxs(ue,{variant:"outline",className:"h-5 px-1.5 text-primary border-primary/20 bg-primary/5 text-[10px]",children:[s.jsx(He,{className:"w-3 h-3 mr-0.5"})," OP"]})]}),s.jsx("span",{className:"text-xs text-muted-foreground block mt-0.5",children:new Date(r.created_at).toLocaleString()})]})}),s.jsx("div",{className:"text-sm leading-relaxed text-foreground/80 whitespace-pre-wrap",children:r.content})]})})]})},r.id)):s.jsx("div",{className:"text-center py-12 text-muted-foreground italic",children:"No replies yet. Be the first to help out!"}),e[86]=l,e[87]=q,e[88]=I):I=e[88];let se;e[89]===Symbol.for("react.memo_cache_sentinel")?(se=s.jsx("div",{ref:we}),e[89]=se):se=e[89];let M;e[90]!==B||e[91]!==I?(M=s.jsxs("div",{className:"space-y-6 relative",children:[Z,B,I,se]}),e[90]=B,e[91]=I,e[92]=M):M=e[92];let R;e[93]!==_||e[94]!==E||e[95]!==M?(R=s.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl grid gap-8",children:[_,E,M]}),e[93]=_,e[94]=E,e[95]=M,e[96]=R):R=e[96];let D;e[97]!==c||e[98]!==R?(D=s.jsxs("div",{className:"bg-background min-h-screen pb-10",children:[c,R]}),e[97]=c,e[98]=R,e[99]=D):D=e[99];let te;return e[100]!==t.title||e[101]!==D||e[102]!==o?(te=s.jsxs(Ee,{title:ye,children:[o,D]}),e[100]=t.title,e[101]=D,e[102]=o,e[103]=te):te=e[103],te}function qe(re){return re.role==="instructor"}export{cs as default};
