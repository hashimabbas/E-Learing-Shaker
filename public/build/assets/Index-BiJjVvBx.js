import{c as B,r as E,j as t,H as R,L as H,a as $}from"./app-sOxb5UUI.js";import{c as O,A as z,b as Q,d as G}from"./app-layout-BzqtqRBw.js";import{B as M}from"./button-DXY6Da92.js";import{c as J,b as K}from"./card-BmGf7jil.js";import{d as U,a as V,D as W,b as X,e as Y,c as Z}from"./dialog-ByK6K7mx.js";import{L}from"./label-AKTtNHee.js";import{I as P}from"./input-CBUkZpQE.js";import{T as ee}from"./textarea-DVDmlWXd.js";import{I as T}from"./input-error-DeEPkcVg.js";import{s as A,M as te}from"./sheet-Dwq67Nmu.js";import{C as se}from"./circle-help-oPleyAIM.js";import{A as re}from"./arrow-left-DTzaJunf.js";import{M as q}from"./message-square-BrVwjBfd.js";import{C as le}from"./circle-plus-DaWW7NqE.js";import{S as ae}from"./search-ki5IdMk8.js";import{F as oe}from"./filter-DyHBgPrL.js";/* empty css            */import"./index-Byz5bboj.js";import"./index-BFuIBbvX.js";import"./index-Dc5gxj5P.js";import"./book-open-ByvVhOAD.js";function ie(x){const e=B.c(42),{courseId:s,closeModal:r}=x;let C;e[0]!==s?(C={course_id:s,title:"",content:""},e[0]=s,e[1]=C):C=e[1];const{data:f,setData:w,post:I,processing:h,errors:l,reset:D}=$(C);let u;e[2]!==r||e[3]!==I||e[4]!==D?(u=_=>{_.preventDefault(),I(A("discussions.store"),{onSuccess:()=>{r(),D()},preserveScroll:!0})},e[2]=r,e[3]=I,e[4]=D,e[5]=u):u=e[5];const k=u;let p;e[6]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx(L,{htmlFor:"title",className:"text-base font-bold",children:"Topic Title"}),e[6]=p):p=e[6];let g;e[7]!==w?(g=_=>w("title",_.target.value),e[7]=w,e[8]=g):g=e[8];let b;e[9]!==f.title||e[10]!==g?(b=t.jsx(P,{id:"title",value:f.title,onChange:g,required:!0,placeholder:"e.g., How do I resolve the API error in Module 3?",className:"h-12 text-lg"}),e[9]=f.title,e[10]=g,e[11]=b):b=e[11];let a;e[12]!==l.title?(a=t.jsx(T,{message:l.title}),e[12]=l.title,e[13]=a):a=e[13];let o;e[14]!==b||e[15]!==a?(o=t.jsxs("div",{className:"space-y-2",children:[p,b,a]}),e[14]=b,e[15]=a,e[16]=o):o=e[16];let S;e[17]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx(L,{htmlFor:"content",className:"text-base font-bold",children:"Detailed Question"}),e[17]=S):S=e[17];let j;e[18]!==w?(j=_=>w("content",_.target.value),e[18]=w,e[19]=j):j=e[19];let i;e[20]!==f.content||e[21]!==j?(i=t.jsx(ee,{id:"content",value:f.content,onChange:j,rows:8,required:!0,placeholder:"Describe your issue or thought in detail...",className:"resize-none p-4 leading-relaxed"}),e[20]=f.content,e[21]=j,e[22]=i):i=e[22];let n;e[23]!==l.content?(n=t.jsx(T,{message:l.content}),e[23]=l.content,e[24]=n):n=e[24];let N;e[25]===Symbol.for("react.memo_cache_sentinel")?(N=t.jsx("p",{className:"text-xs text-muted-foreground",children:"Be specific and clear to get the best answers from instructors and peers."}),e[25]=N):N=e[25];let c;e[26]!==i||e[27]!==n?(c=t.jsxs("div",{className:"space-y-2",children:[S,i,n,N]}),e[26]=i,e[27]=n,e[28]=c):c=e[28];let d;e[29]!==r?(d=t.jsx(M,{type:"button",variant:"ghost",onClick:r,className:"font-bold",children:"Cancel"}),e[29]=r,e[30]=d):d=e[30];const F=h?"Posting...":"Post Topic";let v;e[31]!==h||e[32]!==F?(v=t.jsx(M,{type:"submit",disabled:h,className:"font-bold shadow-lg shadow-primary/20",children:F}),e[31]=h,e[32]=F,e[33]=v):v=e[33];let m;e[34]!==d||e[35]!==v?(m=t.jsxs(Z,{children:[d,v]}),e[34]=d,e[35]=v,e[36]=m):m=e[36];let y;return e[37]!==k||e[38]!==c||e[39]!==m||e[40]!==o?(y=t.jsxs("form",{onSubmit:k,className:"space-y-6",children:[o,c,m]}),e[37]=k,e[38]=c,e[39]=m,e[40]=o,e[41]=y):y=e[41],y}function Ie(x){const e=B.c(43),{course:s,discussions:r}=x,[C,f]=E.useState(!1),w=`Forum: ${s.title}`,I=`Discussions - ${s.title}`;let h;e[0]!==I?(h=t.jsx(R,{title:I}),e[0]=I,e[1]=h):h=e[1];let l;e[2]!==s.slug?(l=A("courses.show",s.slug),e[2]=s.slug,e[3]=l):l=e[3];let D;e[4]===Symbol.for("react.memo_cache_sentinel")?(D=t.jsx(re,{className:"h-4 w-4 mr-2 transition-transform group-hover:-translate-x-1"}),e[4]=D):D=e[4];let u;e[5]!==l?(u=t.jsxs(H,{href:l,className:"flex items-center text-sm font-medium text-muted-foreground hover:text-primary transition-colors mb-6 group",children:[D,"Back to Course Content"]}),e[5]=l,e[6]=u):u=e[6];let k;e[7]===Symbol.for("react.memo_cache_sentinel")?(k=t.jsxs("div",{className:"flex items-center gap-2 text-primary font-bold text-xs uppercase tracking-widest",children:[t.jsx(q,{className:"h-4 w-4"})," Course Forum"]}),e[7]=k):k=e[7];let p;e[8]!==s.title?(p=t.jsxs("div",{className:"space-y-2",children:[k,t.jsx("h1",{className:"text-3xl font-extrabold tracking-tight md:text-4xl text-foreground",children:s.title})]}),e[8]=s.title,e[9]=p):p=e[9];let g;e[10]===Symbol.for("react.memo_cache_sentinel")?(g=()=>f(!0),e[10]=g):g=e[10];let b;e[11]===Symbol.for("react.memo_cache_sentinel")?(b=t.jsxs(M,{size:"lg",onClick:g,className:"h-12 rounded-full px-8 font-bold shadow-xl shadow-primary/20 transition-all hover:scale-105",children:[t.jsx(le,{className:"h-5 w-5 mr-2"})," Start New Topic"]}),e[11]=b):b=e[11];let a;e[12]!==p?(a=t.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6",children:[p,b]}),e[12]=p,e[13]=a):a=e[13];let o;e[14]!==a||e[15]!==u?(o=t.jsx("div",{className:"border-b bg-muted/30 py-8",children:t.jsxs("div",{className:"container mx-auto px-4 max-w-5xl",children:[u,a]})}),e[14]=a,e[15]=u,e[16]=o):o=e[16];let S;e[17]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsxs("div",{className:"relative flex-1 group",children:[t.jsx(ae,{className:"absolute left-4 top-1/2 h-5 w-5 -translate-y-1/2 text-muted-foreground transition-colors group-focus-within:text-primary"}),t.jsx(P,{placeholder:"Search discussions...",className:"pl-12 h-12 bg-background border-muted-foreground/20 rounded-xl shadow-sm focus-visible:ring-primary/20"})]}),e[17]=S):S=e[17];let j;e[18]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[S,t.jsxs(M,{variant:"outline",className:"h-12 rounded-xl px-6 border-muted-foreground/20 text-muted-foreground font-bold hover:text-foreground",children:[t.jsx(oe,{className:"mr-2 h-4 w-4"})," Filter"]})]}),e[18]=j):j=e[18];let i;e[19]!==r.data?(i=r.data.length>0?r.data.map(ne):t.jsxs("div",{className:"text-center py-20 bg-muted/20 border-2 border-dashed rounded-3xl",children:[t.jsx("div",{className:"mx-auto h-16 w-16 bg-muted rounded-full flex items-center justify-center mb-4",children:t.jsx(se,{className:"h-8 w-8 text-muted-foreground/50"})}),t.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:"No discussions yet"}),t.jsx("p",{className:"text-muted-foreground max-w-sm mx-auto mb-6",children:"Be the first to ask a question or start a conversation about this course!"}),t.jsx(M,{onClick:()=>f(!0),variant:"outline",className:"font-bold border-primary text-primary hover:bg-primary hover:text-primary-foreground",children:"Start the Conversation"})]}),e[19]=r.data,e[20]=i):i=e[20];let n;e[21]!==i?(n=t.jsx("div",{className:"grid gap-4",children:i}),e[21]=i,e[22]=n):n=e[22];let N;e[23]!==r.data.length?(N=r.data.length>0&&t.jsx("div",{className:"mt-8 flex justify-center",children:t.jsx(M,{variant:"ghost",className:"text-muted-foreground hover:text-foreground",children:"Load More Topics"})}),e[23]=r.data.length,e[24]=N):N=e[24];let c;e[25]!==n||e[26]!==N?(c=t.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[j,n,N]}),e[25]=n,e[26]=N,e[27]=c):c=e[27];let d;e[28]!==o||e[29]!==c?(d=t.jsxs("div",{className:"bg-background min-h-screen pb-20",children:[o,c]}),e[28]=o,e[29]=c,e[30]=d):d=e[30];let F;e[31]===Symbol.for("react.memo_cache_sentinel")?(F=t.jsxs(V,{className:"p-6 bg-muted/30 border-b",children:[t.jsxs(W,{className:"text-xl font-black flex items-center gap-2",children:[t.jsx(q,{className:"h-5 w-5 text-primary"})," Start New Discussion"]}),t.jsx(X,{className:"text-base",children:"Ask a question or share a thought with your classmates and instructors."})]}),e[31]=F):F=e[31];let v;e[32]===Symbol.for("react.memo_cache_sentinel")?(v=()=>f(!1),e[32]=v):v=e[32];let m;e[33]!==s.id?(m=t.jsxs(U,{className:"sm:max-w-xl p-0 overflow-hidden border-none shadow-2xl rounded-3xl",children:[F,t.jsx("div",{className:"p-6",children:t.jsx(ie,{courseId:s.id,closeModal:v})})]}),e[33]=s.id,e[34]=m):m=e[34];let y;e[35]!==C||e[36]!==m?(y=t.jsx(Y,{open:C,onOpenChange:f,children:m}),e[35]=C,e[36]=m,e[37]=y):y=e[37];let _;return e[38]!==w||e[39]!==d||e[40]!==y||e[41]!==h?(_=t.jsxs(O,{title:w,children:[h,d,y]}),e[38]=w,e[39]=d,e[40]=y,e[41]=h,e[42]=_):_=e[42],_}function ne(x){return t.jsx(H,{href:A("discussions.show",x.id),className:"block group",children:t.jsx(J,{className:"border-none shadow-sm group-hover:shadow-md transition-all bg-card/50 group-hover:bg-card border-l-4 border-l-transparent group-hover:border-l-primary overflow-hidden",children:t.jsx(K,{className:"p-6",children:t.jsxs("div",{className:"flex items-start gap-4",children:[t.jsx("div",{className:"hidden sm:block",children:t.jsx(z,{className:"h-12 w-12 border shadow-sm",children:t.jsx(Q,{className:"bg-primary/5 text-primary font-bold",children:x.user.name.charAt(0)})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-1",children:[t.jsx("span",{className:"text-xs font-bold text-primary bg-primary/10 px-2 py-0.5 rounded-full",children:"Discussion"}),t.jsxs("span",{className:"text-xs text-muted-foreground flex items-center",children:[t.jsx("span",{className:"mx-1",children:"•"}),"Posted by ",t.jsx("span",{className:"font-semibold text-foreground ml-1",children:x.user.name})]}),t.jsxs("span",{className:"text-xs text-muted-foreground flex items-center",children:[t.jsx("span",{className:"mx-1",children:"•"}),new Date(x.created_at).toLocaleDateString()]})]}),t.jsx("h3",{className:"text-lg font-bold text-foreground group-hover:text-primary transition-colors leading-snug mb-2",children:x.title}),t.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2 leading-relaxed",children:x.content})]}),t.jsxs("div",{className:"flex flex-col items-end justify-center shrink-0 pl-4 border-l border-dashed border-muted",children:[t.jsxs("div",{className:"flex items-center gap-1.5 text-foreground group-hover:text-primary transition-colors font-black text-lg",children:[t.jsx(te,{className:"h-5 w-5"}),x.comments_count]}),t.jsx("span",{className:"text-[10px] uppercase font-bold text-muted-foreground tracking-wider",children:"Replies"}),t.jsx(G,{className:"h-5 w-5 text-muted-foreground/30 mt-2 group-hover:translate-x-1 transition-transform"})]})]})})})},x.id)}export{Ie as default};
