import{d as Ge,r as M,j as s,c as Ne,a as Qe,e as Ts,t as W,f as Be,b as je,H as qs,L as os,C as ds}from"./app-aNgoSjIQ.js";import{c as Fs,U as Ps,e as Ds,L as cs}from"./app-layout-BZWuSlZs.js";import{c as ze,B as T}from"./button-DGbz5Amp.js";import{a as fe,C as ue,b as ne,c as G,d as Ce}from"./card-BobQbCH7.js";import{u as As,c as Is,a as Je,P as Qs}from"./index-DohCjxrY.js";import{u as Es,f as Ms,g as hs,R as Us,I as Ls,s as Ie}from"./sheet-BXCzQOF1.js";import{P as Ke}from"./index-D2jpFfxb.js";import{I as B}from"./input-By2UIQfe.js";import{L as A}from"./label-Bbs4gpQK.js";import{T as Ue}from"./textarea-DsfyfFuP.js";import{I as $}from"./input-error-CebSvdRi.js";import{d as ts,S as as,a as rs,b as is,c as ke}from"./select-C3VcPzBN.js";import{e as $s,d as Rs,a as Vs,D as Os}from"./dialog-2W-nPbOt.js";import{P as ps}from"./progress-DRUY9d4U.js";import{V as Me}from"./video-CeGf4XJz.js";import{D as Bs}from"./download-9LQghPQY.js";import{C as Hs}from"./checkbox-BN-MmbRA.js";import{C as Gs}from"./circle-check-big-CzrlCdd-.js";import{C as Ks}from"./circle-x-C6Q2py64.js";import{T as Le}from"./trash-2-IQd1tH-J.js";import{C as $e}from"./circle-plus-CdisOvwf.js";import{S as ms}from"./square-pen-m4nYWRCW.js";import{B as Se}from"./badge-BG8J84N0.js";import{S as Zs}from"./separator-DSIsnXxT.js";import{A as Ws}from"./arrow-left-BW4it7lJ.js";import{P as Ys}from"./play-w7b-oCxF.js";import{B as Xe,L as us,a as Js}from"./link-DRHGR2OW.js";import{S as es}from"./sparkles-D6LdQzQW.js";import{C as Ee}from"./circle-help-CvlX519t.js";import{F as Xs}from"./file-text-DZmW8zfu.js";/* empty css            */import"./index-Dc5gxj5P.js";import"./chevron-right-DH5vIeDc.js";import"./index-PP-FN8Rp.js";import"./chevron-down-DCHiihOJ.js";import"./check-Ch85f8oe.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],ls=Ge("ListOrdered",et);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],tt=Ge("Pen",st);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Oe=Ge("Save",at);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],fs=Ge("Upload",rt);var Ze="Tabs",[it,na]=Is(Ze,[hs]),gs=hs(),[lt,ns]=it(Ze),bs=M.forwardRef((r,e)=>{const{__scopeTabs:i,value:a,onValueChange:n,defaultValue:o,orientation:c="horizontal",dir:x,activationMode:y="automatic",...v}=r,g=Es(x),[f,b]=As({prop:a,onChange:n,defaultProp:o??"",caller:Ze});return s.jsx(lt,{scope:i,baseId:Ms(),value:f,onValueChange:b,orientation:c,dir:g,activationMode:y,children:s.jsx(Ke.div,{dir:g,"data-orientation":c,...v,ref:e})})});bs.displayName=Ze;var js="TabsList",vs=M.forwardRef((r,e)=>{const{__scopeTabs:i,loop:a=!0,...n}=r,o=ns(js,i),c=gs(i);return s.jsx(Us,{asChild:!0,...c,orientation:o.orientation,dir:o.dir,loop:a,children:s.jsx(Ke.div,{role:"tablist","aria-orientation":o.orientation,...n,ref:e})})});vs.displayName=js;var Ns="TabsTrigger",ys=M.forwardRef((r,e)=>{const{__scopeTabs:i,value:a,disabled:n=!1,...o}=r,c=ns(Ns,i),x=gs(i),y=ks(c.baseId,a),v=Cs(c.baseId,a),g=a===c.value;return s.jsx(Ls,{asChild:!0,...x,focusable:!n,active:g,children:s.jsx(Ke.button,{type:"button",role:"tab","aria-selected":g,"aria-controls":v,"data-state":g?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:y,...o,ref:e,onMouseDown:Je(r.onMouseDown,f=>{!n&&f.button===0&&f.ctrlKey===!1?c.onValueChange(a):f.preventDefault()}),onKeyDown:Je(r.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&c.onValueChange(a)}),onFocus:Je(r.onFocus,()=>{const f=c.activationMode!=="manual";!g&&!n&&f&&c.onValueChange(a)})})})});ys.displayName=Ns;var ws="TabsContent",_s=M.forwardRef((r,e)=>{const{__scopeTabs:i,value:a,forceMount:n,children:o,...c}=r,x=ns(ws,i),y=ks(x.baseId,a),v=Cs(x.baseId,a),g=a===x.value,f=M.useRef(g);return M.useEffect(()=>{const b=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(b)},[]),s.jsx(Qs,{present:n||g,children:({present:b})=>s.jsx(Ke.div,{"data-state":g?"active":"inactive","data-orientation":x.orientation,role:"tabpanel","aria-labelledby":y,hidden:!b,id:v,tabIndex:0,...c,ref:e,style:{...r.style,animationDuration:f.current?"0s":void 0},children:b&&o})})});_s.displayName=ws;function ks(r,e){return`${r}-trigger-${e}`}function Cs(r,e){return`${r}-content-${e}`}var nt=bs,ot=vs,dt=ys,ct=_s;function Ss(r){const e=Ne.c(8);let i,a;e[0]!==r?({className:i,...a}=r,e[0]=r,e[1]=i,e[2]=a):(i=e[1],a=e[2]);let n;e[3]!==i?(n=ze("flex flex-col gap-2",i),e[3]=i,e[4]=n):n=e[4];let o;return e[5]!==a||e[6]!==n?(o=s.jsx(nt,{"data-slot":"tabs",className:n,...a}),e[5]=a,e[6]=n,e[7]=o):o=e[7],o}function zs(r){const e=Ne.c(8);let i,a;e[0]!==r?({className:i,...a}=r,e[0]=r,e[1]=i,e[2]=a):(i=e[1],a=e[2]);let n;e[3]!==i?(n=ze("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",i),e[3]=i,e[4]=n):n=e[4];let o;return e[5]!==a||e[6]!==n?(o=s.jsx(ot,{"data-slot":"tabs-list",className:n,...a}),e[5]=a,e[6]=n,e[7]=o):o=e[7],o}function _e(r){const e=Ne.c(8);let i,a;e[0]!==r?({className:i,...a}=r,e[0]=r,e[1]=i,e[2]=a):(i=e[1],a=e[2]);let n;e[3]!==i?(n=ze("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",i),e[3]=i,e[4]=n):n=e[4];let o;return e[5]!==a||e[6]!==n?(o=s.jsx(dt,{"data-slot":"tabs-trigger",className:n,...a}),e[5]=a,e[6]=n,e[7]=o):o=e[7],o}function ve(r){const e=Ne.c(8);let i,a;e[0]!==r?({className:i,...a}=r,e[0]=r,e[1]=i,e[2]=a):(i=e[1],a=e[2]);let n;e[3]!==i?(n=ze("flex-1 outline-none",i),e[3]=i,e[4]=n):n=e[4];let o;return e[5]!==a||e[6]!==n?(o=s.jsx(ct,{"data-slot":"tabs-content",className:n,...a}),e[5]=a,e[6]=n,e[7]=o):o=e[7],o}function mt(r){const e=Ne.c(92),{courseId:i,lesson:a,onSave:n,onCancel:o}=r,c=!!a?.id,x=a?.id||null,y=a?.title||"",v=a?.description||"",g=a?.type||"video",f=a?.order||0,b=a?.is_free_preview||!1;let z;e[0]!==i||e[1]!==x||e[2]!==y||e[3]!==v||e[4]!==g||e[5]!==f||e[6]!==b?(z={id:x,course_id:i,title:y,description:v,type:g,order:f,is_free_preview:b},e[0]=i,e[1]=x,e[2]=y,e[3]=v,e[4]=g,e[5]=f,e[6]=b,e[7]=z):z=e[7];const{data:d,setData:p,post:l,patch:m,processing:S,errors:u,reset:C}=Qe(z);let _;e[8]!==d.id||e[9]!==c||e[10]!==n||e[11]!==m||e[12]!==l||e[13]!==C?(_=N=>{N.preventDefault();const I=c?"instructor.lessons.update":"instructor.lessons.store",Q=c?d.id:void 0;c?m(route(I,Q),{onSuccess:()=>{n(),C()},preserveScroll:!0}):l(route(I,Q),{onSuccess:()=>{n(),C()},preserveScroll:!0})},e[8]=d.id,e[9]=c,e[10]=n,e[11]=m,e[12]=l,e[13]=C,e[14]=_):_=e[14];const w=_,F=c?"Edit Lesson":"Add New Lesson";let k;e[15]!==F?(k=s.jsx(fe,{children:s.jsx(ue,{children:F})}),e[15]=F,e[16]=k):k=e[16];let q;e[17]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx(A,{htmlFor:"title",children:"Title"}),e[17]=q):q=e[17];let P;e[18]!==p?(P=N=>p("title",N.target.value),e[18]=p,e[19]=P):P=e[19];let E;e[20]!==d.title||e[21]!==P?(E=s.jsx(B,{id:"title",value:d.title,onChange:P,required:!0}),e[20]=d.title,e[21]=P,e[22]=E):E=e[22];let R;e[23]!==u.title?(R=s.jsx($,{message:u.title}),e[23]=u.title,e[24]=R):R=e[24];let U;e[25]!==E||e[26]!==R?(U=s.jsxs("div",{className:"space-y-2",children:[q,E,R]}),e[25]=E,e[26]=R,e[27]=U):U=e[27];let V;e[28]===Symbol.for("react.memo_cache_sentinel")?(V=s.jsx(A,{htmlFor:"description",children:"Description"}),e[28]=V):V=e[28];let t;e[29]!==p?(t=N=>p("description",N.target.value),e[29]=p,e[30]=t):t=e[30];let h;e[31]!==d.description||e[32]!==t?(h=s.jsx(Ue,{id:"description",value:d.description,onChange:t,rows:3}),e[31]=d.description,e[32]=t,e[33]=h):h=e[33];let j;e[34]!==u.description?(j=s.jsx($,{message:u.description}),e[34]=u.description,e[35]=j):j=e[35];let D;e[36]!==h||e[37]!==j?(D=s.jsxs("div",{className:"space-y-2",children:[V,h,j]}),e[36]=h,e[37]=j,e[38]=D):D=e[38];let Y;e[39]===Symbol.for("react.memo_cache_sentinel")?(Y=s.jsx(A,{htmlFor:"order",children:"Order"}),e[39]=Y):Y=e[39];let K;e[40]!==p?(K=N=>p("order",parseInt(N.target.value)),e[40]=p,e[41]=K):K=e[41];let J;e[42]!==d.order||e[43]!==K?(J=s.jsx(B,{id:"order",type:"number",value:d.order,onChange:K,required:!0}),e[42]=d.order,e[43]=K,e[44]=J):J=e[44];let L;e[45]!==u.order?(L=s.jsx($,{message:u.order}),e[45]=u.order,e[46]=L):L=e[46];let H;e[47]!==J||e[48]!==L?(H=s.jsxs("div",{className:"space-y-2",children:[Y,J,L]}),e[47]=J,e[48]=L,e[49]=H):H=e[49];let X;e[50]===Symbol.for("react.memo_cache_sentinel")?(X=s.jsx(A,{htmlFor:"type",children:"Lesson Type"}),e[50]=X):X=e[50];let Z;e[51]!==p?(Z=N=>p("type",N),e[51]=p,e[52]=Z):Z=e[52];let ge;e[53]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(as,{children:s.jsx(rs,{placeholder:"Select Type"})}),e[53]=ge):ge=e[53];let oe;e[54]===Symbol.for("react.memo_cache_sentinel")?(oe=s.jsxs(is,{children:[s.jsx(ke,{value:"video",children:"Video"}),s.jsx(ke,{value:"downloadable",children:"E-book/PDF"}),s.jsx(ke,{value:"quiz",children:"Quiz"}),s.jsx(ke,{value:"text",children:"Text"})]}),e[54]=oe):oe=e[54];let de;e[55]!==d.type||e[56]!==Z?(de=s.jsxs(ts,{onValueChange:Z,value:d.type,children:[ge,oe]}),e[55]=d.type,e[56]=Z,e[57]=de):de=e[57];let ce;e[58]!==u.type?(ce=s.jsx($,{message:u.type}),e[58]=u.type,e[59]=ce):ce=e[59];let ee;e[60]!==de||e[61]!==ce?(ee=s.jsxs("div",{className:"space-y-2",children:[X,de,ce]}),e[60]=de,e[61]=ce,e[62]=ee):ee=e[62];let se;e[63]!==H||e[64]!==ee?(se=s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[H,ee]}),e[63]=H,e[64]=ee,e[65]=se):se=e[65];let te;e[66]!==p?(te=N=>p("is_free_preview",N.target.checked),e[66]=p,e[67]=te):te=e[67];let xe;e[68]!==d.is_free_preview||e[69]!==te?(xe=s.jsx("input",{type:"checkbox",id:"preview",checked:d.is_free_preview,onChange:te,className:"form-checkbox"}),e[68]=d.is_free_preview,e[69]=te,e[70]=xe):xe=e[70];let me;e[71]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsx(A,{htmlFor:"preview",className:"font-normal",children:"Allow Free Preview"}),e[71]=me):me=e[71];let ae;e[72]!==xe?(ae=s.jsxs("div",{className:"flex items-center space-x-2",children:[xe,me]}),e[72]=xe,e[73]=ae):ae=e[73];let re;e[74]!==o?(re=s.jsx(T,{type:"button",variant:"secondary",onClick:o,children:"Cancel"}),e[74]=o,e[75]=re):re=e[75];const ye=c?"Save Changes":"Add Lesson";let ie;e[76]!==S||e[77]!==ye?(ie=s.jsx(T,{type:"submit",disabled:S,children:ye}),e[76]=S,e[77]=ye,e[78]=ie):ie=e[78];let he;e[79]!==re||e[80]!==ie?(he=s.jsxs("div",{className:"flex justify-end space-x-2",children:[re,ie]}),e[79]=re,e[80]=ie,e[81]=he):he=e[81];let le;e[82]!==w||e[83]!==U||e[84]!==D||e[85]!==se||e[86]!==ae||e[87]!==he?(le=s.jsx(ne,{children:s.jsxs("form",{onSubmit:w,className:"space-y-4",children:[U,D,se,ae,he]})}),e[82]=w,e[83]=U,e[84]=D,e[85]=se,e[86]=ae,e[87]=he,e[88]=le):le=e[88];let be;return e[89]!==k||e[90]!==le?(be=s.jsxs(G,{className:"shadow-lg border-primary/50",children:[k,le]}),e[89]=k,e[90]=le,e[91]=be):be=e[91],be}const ss=10*1024*1024;function ut({lessonId:r,lessonType:e,onUploadSuccess:i}){const{data:a,setData:n,errors:o,reset:c}=Qe({resource_file:null}),[x,y]=M.useState(!1),[v,g]=M.useState(0),f=e==="video",b=f?"video/mp4,video/quicktime":"application/pdf",z=f?s.jsx(Me,{className:"h-4 w-4 mr-2"}):s.jsx(Bs,{className:"h-4 w-4 mr-2"}),d=async p=>{if(p.preventDefault(),!a.resource_file){W.error("Please select a file to upload.");return}const l=a.resource_file,m=Math.ceil(l.size/ss),S=`${l.name}-${l.size}-${Date.now()}`.replace(/[^a-zA-Z0-9]/g,"-");y(!0),g(0);try{for(let u=0;u<m;u++){const C=u*ss,_=Math.min(l.size,C+ss),w=l.slice(C,_),F=new FormData;F.append("file",w),F.append("file_id",S),F.append("chunk_index",u.toString()),F.append("total_chunks",m.toString()),await Be.post(route("instructor.upload_chunk"),F,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:k=>{const q=k.loaded/(k.total||w.size)*100,P=u/m*100+q/m;g(Math.round(P))}})}await Be.post(route("instructor.finish_upload",r),{file_id:S,total_chunks:m,original_name:l.name,lesson_type:e}),W.success("Resource uploaded and processed successfully."),i(),c("resource_file")}catch(u){console.error("Upload failed:",u),W.error(u.response?.data?.message||"Upload failed. Please try again.")}finally{y(!1),g(0)}};return s.jsxs("form",{onSubmit:d,className:"space-y-4 p-6 border rounded-2xl bg-muted/30 shadow-sm",children:[s.jsxs("h3",{className:"text-xl font-black italic tracking-tight uppercase flex items-center",children:[z," Upload ",f?"Video Lecture":"E-Book PDF"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(A,{htmlFor:"resource_file",className:"text-sm font-bold uppercase tracking-widest text-muted-foreground/80",children:f?"Select Video File":"Select PDF File"}),s.jsx(B,{id:"resource_file",type:"file",accept:b,className:"h-12 border-muted-foreground/20 rounded-xl bg-background/50 cursor-pointer pt-2",onChange:p=>n("resource_file",p.target.files?p.target.files[0]:null),disabled:x,required:!0}),s.jsx($,{message:o.resource_file})]}),s.jsx(T,{type:"submit",disabled:x,className:"w-full h-12 rounded-xl font-black text-lg shadow-lg",children:x?s.jsxs(s.Fragment,{children:[s.jsx(Ts,{className:"w-5 h-5 mr-2 animate-spin"})," Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(fs,{className:"w-5 h-5 mr-2"})," Start Secure Upload"]})}),x&&s.jsxs("div",{className:"space-y-3 pt-4 animate-in fade-in slide-in-from-top-2 duration-300",children:[s.jsxs("div",{className:"flex justify-between text-[10px] font-black uppercase tracking-widest text-primary",children:[s.jsx("span",{children:"Transmitting Data..."}),s.jsxs("span",{children:[v,"%"]})]}),s.jsx(ps,{value:v,className:"h-2 rounded-full shadow-inner"})]})]})}function xt(r){const e=Ne.c(34),{lessonId:i,initialContent:a,initialTitle:n,initialOrder:o,initialIsFreePreview:c,onSave:x}=r;let y;e[0]!==a||e[1]!==c||e[2]!==o||e[3]!==n?(y={description:a,title:n,order:o,is_free_preview:c},e[0]=a,e[1]=c,e[2]=o,e[3]=n,e[4]=y):y=e[4];const{data:v,setData:g,patch:f,processing:b,errors:z}=Qe(y);let d;e[5]!==i||e[6]!==x||e[7]!==f?(d=E=>{E.preventDefault(),f(route("instructor.lessons.update",i),{onSuccess:()=>{W.success("Text content saved successfully."),x()},onError:ht,preserveScroll:!0})},e[5]=i,e[6]=x,e[7]=f,e[8]=d):d=e[8];const p=d;let l;e[9]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx("h3",{className:"text-lg font-semibold",children:"Edit Text Content"}),e[9]=l):l=e[9];let m;e[10]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx(A,{htmlFor:"content",children:"Lesson Text Content (Supports Markdown)"}),e[10]=m):m=e[10];let S;e[11]!==g?(S=E=>g("description",E.target.value),e[11]=g,e[12]=S):S=e[12];let u;e[13]!==v.description||e[14]!==S?(u=s.jsx(Ue,{id:"content",value:v.description,onChange:S,rows:10,required:!0}),e[13]=v.description,e[14]=S,e[15]=u):u=e[15];let C;e[16]!==z.description?(C=s.jsx($,{message:z.description}),e[16]=z.description,e[17]=C):C=e[17];let _;e[18]!==u||e[19]!==C?(_=s.jsxs("div",{className:"space-y-2",children:[m,u,C]}),e[18]=u,e[19]=C,e[20]=_):_=e[20];const w=b?"Saving...":"Save Text Content";let F;e[21]!==b||e[22]!==w?(F=s.jsx(T,{type:"submit",disabled:b,children:w}),e[21]=b,e[22]=w,e[23]=F):F=e[23];let k;e[24]!==v.order||e[25]!==v.title?(k=s.jsxs("p",{className:"text-sm text-muted-foreground pt-2 border-t mt-4",children:["Updating content for: **",v.title,"** (Order: ",v.order,")"]}),e[24]=v.order,e[25]=v.title,e[26]=k):k=e[26];let q;e[27]!==F||e[28]!==k?(q=s.jsxs("div",{className:"flex justify-end space-x-2",children:[F,k]}),e[27]=F,e[28]=k,e[29]=q):q=e[29];let P;return e[30]!==p||e[31]!==q||e[32]!==_?(P=s.jsxs("form",{onSubmit:p,className:"space-y-4 p-4 border rounded-lg bg-white dark:bg-neutral-900",children:[l,_,q]}),e[30]=p,e[31]=q,e[32]=_,e[33]=P):P=e[33],P}function ht(r){return console.error("Text content save failed:",r)}const He=()=>Date.now()+Math.random(),xs=[{local_id:He(),text:"",is_correct:!0},{local_id:He(),text:"",is_correct:!1}],pt=r=>r.map(e=>({local_id:e.id||He(),id:e.id,text:e.text,is_correct:e.is_correct}));function ft(r){const e=Ne.c(116),{lessonId:i,quizId:a,lessonTitle:n,onQuizCreated:o,onQuestionSaved:c,initialQuestion:x}=r;let y;e[0]!==x||e[1]!==a?(y=x?{id:x.id,text:x.text,type:x.type,answers:pt(x.answers),quiz_id:a}:{id:null,text:"",type:"single_choice",answers:xs,quiz_id:a},e[0]=x,e[1]=a,e[2]=y):y=e[2];const v=y;let g;e[3]!==i||e[4]!==n?(g={lesson_id:i,title:n,pass_percentage:70},e[3]=i,e[4]=n,e[5]=g):g=e[5];const{data:f,setData:b,post:z,processing:d,errors:p}=Qe(g),{data:l,setData:m,post:S,put:u,processing:C,errors:_,reset:w}=Qe(v);let F;e[6]!==l.quiz_id||e[7]!==a||e[8]!==m?(F=()=>{a&&l.quiz_id!==a&&m("quiz_id",a)},e[6]=l.quiz_id,e[7]=a,e[8]=m,e[9]=F):F=e[9];let k;e[10]!==a?(k=[a],e[10]=a,e[11]=k):k=e[11],M.useEffect(F,k);let q;e[12]!==l.answers||e[13]!==m?(q=(N,I)=>{const Q=l.answers.map((O,pe)=>pe===N?{...O,text:I}:O);m("answers",Q)},e[12]=l.answers,e[13]=m,e[14]=q):q=e[14];const P=q;let E;e[15]!==l.answers||e[16]!==l.type||e[17]!==m?(E=N=>{let I;l.type==="single_choice"||l.type==="true_false"?I=l.answers.map((Q,O)=>({...Q,is_correct:O===N})):I=l.answers.map((Q,O)=>({...Q,is_correct:O===N?!Q.is_correct:Q.is_correct})),m("answers",I)},e[15]=l.answers,e[16]=l.type,e[17]=m,e[18]=E):E=e[18];const R=E;let U;e[19]!==l.answers||e[20]!==m?(U=()=>{m("answers",[...l.answers,{local_id:He(),text:"",is_correct:!1}])},e[19]=l.answers,e[20]=m,e[21]=U):U=e[21];const V=U;let t;e[22]!==o||e[23]!==z?(t=N=>{N.preventDefault(),z(route("instructor.quizzes.store"),{onSuccess:()=>o(),preserveScroll:!0,onError:jt})},e[22]=o,e[23]=z,e[24]=t):t=e[24];const h=t;let j;e[25]!==c||e[26]!==S||e[27]!==u||e[28]!==l||e[29]!==w||e[30]!==a||e[31]!==m?(j=N=>{N.preventDefault();const I=l.answers.filter(bt).length;if(l.answers.length<2||I===0){W.error("Question must have at least two answers and one correct answer.");return}const Q=!!l.id,O=Q?u:S,pe=Q?"instructor.quizzes.question.update":"instructor.quizzes.question.add",we=Q?{question:l.id}:{quiz:a};O(route(pe,we),l,{onSuccess:()=>{w("text"),m("answers",xs),c(),W.success(`Question ${Q?"updated":"added"} successfully!`)},onError:gt,preserveScroll:!0})},e[25]=c,e[26]=S,e[27]=u,e[28]=l,e[29]=w,e[30]=a,e[31]=m,e[32]=j):j=e[32];const D=j;if(!a){let N;e[33]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(fe,{children:s.jsx(ue,{className:"text-xl",children:"Quiz Not Initialized"})}),e[33]=N):N=e[33];let I;e[34]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx("p",{className:"mb-4 text-muted-foreground",children:"This lesson does not have a Quiz record yet. You must create the Quiz before adding questions."}),e[34]=I):I=e[34];let Q;e[35]===Symbol.for("react.memo_cache_sentinel")?(Q=s.jsx(A,{htmlFor:"quiz-title",children:"Quiz Title"}),e[35]=Q):Q=e[35];let O;e[36]!==b?(O=Ye=>b("title",Ye.target.value),e[36]=b,e[37]=O):O=e[37];let pe;e[38]!==f.title||e[39]!==O?(pe=s.jsx(B,{id:"quiz-title",value:f.title,onChange:O,required:!0}),e[38]=f.title,e[39]=O,e[40]=pe):pe=e[40];let we;e[41]!==p.title?(we=s.jsx($,{message:p.title}),e[41]=p.title,e[42]=we):we=e[42];let Te;e[43]!==pe||e[44]!==we?(Te=s.jsxs("div",{className:"space-y-2",children:[Q,pe,we]}),e[43]=pe,e[44]=we,e[45]=Te):Te=e[45];let Re;e[46]===Symbol.for("react.memo_cache_sentinel")?(Re=s.jsx(A,{htmlFor:"pass-percentage",children:"Pass Percentage (%)"}),e[46]=Re):Re=e[46];let qe;e[47]!==b?(qe=Ye=>b("pass_percentage",parseInt(Ye.target.value)),e[47]=b,e[48]=qe):qe=e[48];let Fe;e[49]!==f.pass_percentage||e[50]!==qe?(Fe=s.jsx(B,{id:"pass-percentage",type:"number",min:"1",max:"100",value:f.pass_percentage,onChange:qe,required:!0}),e[49]=f.pass_percentage,e[50]=qe,e[51]=Fe):Fe=e[51];let Pe;e[52]!==p.pass_percentage?(Pe=s.jsx($,{message:p.pass_percentage}),e[52]=p.pass_percentage,e[53]=Pe):Pe=e[53];let De;e[54]!==Fe||e[55]!==Pe?(De=s.jsxs("div",{className:"space-y-2",children:[Re,Fe,Pe]}),e[54]=Fe,e[55]=Pe,e[56]=De):De=e[56];const We=d?"Creating...":"Initialize Quiz";let Ae;e[57]!==d||e[58]!==We?(Ae=s.jsx(T,{type:"submit",disabled:d,children:We}),e[57]=d,e[58]=We,e[59]=Ae):Ae=e[59];let Ve;return e[60]!==h||e[61]!==Te||e[62]!==De||e[63]!==Ae?(Ve=s.jsxs(G,{children:[N,s.jsxs(ne,{children:[I,s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[Te,De,Ae]})]})]}),e[60]=h,e[61]=Te,e[62]=De,e[63]=Ae,e[64]=Ve):Ve=e[64],Ve}const Y=l.id?"Editing Question":"Add New Question";let K;e[65]!==Y?(K=s.jsx(fe,{className:"p-0",children:s.jsx(ue,{className:"text-lg",children:Y})}),e[65]=Y,e[66]=K):K=e[66];let J;e[67]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx(A,{htmlFor:"question-text",children:"Question Text"}),e[67]=J):J=e[67];let L;e[68]!==m?(L=N=>m("text",N.target.value),e[68]=m,e[69]=L):L=e[69];let H;e[70]!==l.text||e[71]!==L?(H=s.jsx(Ue,{id:"question-text",value:l.text,onChange:L,required:!0,rows:3}),e[70]=l.text,e[71]=L,e[72]=H):H=e[72];let X;e[73]!==_.text?(X=s.jsx($,{message:_.text}),e[73]=_.text,e[74]=X):X=e[74];let Z;e[75]!==H||e[76]!==X?(Z=s.jsxs("div",{className:"space-y-2",children:[J,H,X]}),e[75]=H,e[76]=X,e[77]=Z):Z=e[77];let ge;e[78]===Symbol.for("react.memo_cache_sentinel")?(ge=s.jsx(A,{htmlFor:"type",children:"Question Type"}),e[78]=ge):ge=e[78];let oe;e[79]!==m?(oe=N=>m("type",N),e[79]=m,e[80]=oe):oe=e[80];let de;e[81]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(as,{id:"type",children:s.jsx(rs,{placeholder:"Select Type"})}),e[81]=de):de=e[81];let ce;e[82]===Symbol.for("react.memo_cache_sentinel")?(ce=s.jsxs(is,{children:[s.jsx(ke,{value:"single_choice",children:"Single Choice"}),s.jsx(ke,{value:"multiple_choice",children:"Multiple Choice"}),s.jsx(ke,{value:"true_false",children:"True/False"})]}),e[82]=ce):ce=e[82];let ee;e[83]!==l.type||e[84]!==oe?(ee=s.jsxs(ts,{onValueChange:oe,value:l.type,children:[de,ce]}),e[83]=l.type,e[84]=oe,e[85]=ee):ee=e[85];let se;e[86]!==_.type?(se=s.jsx($,{message:_.type}),e[86]=_.type,e[87]=se):se=e[87];let te;e[88]!==ee||e[89]!==se?(te=s.jsxs("div",{className:"space-y-2",children:[ge,ee,se]}),e[88]=ee,e[89]=se,e[90]=te):te=e[90];const xe=Array.isArray(l.answers)?l.answers.length:0;let me;e[91]!==xe?(me=s.jsxs("h4",{className:"font-semibold border-b pb-2",children:["Answers (",xe,")"]}),e[91]=xe,e[92]=me):me=e[92];let ae;e[93]!==P||e[94]!==R||e[95]!==l.answers||e[96]!==l.type||e[97]!==m?(ae=Array.isArray(l.answers)&&l.answers.map((N,I)=>s.jsxs("div",{className:"flex items-center space-x-2",children:[l.type==="multiple_choice"?s.jsxs("div",{className:"flex h-9 items-center space-x-2",children:[s.jsx(Hs,{id:`answer-check-${I}`,checked:N.is_correct,onCheckedChange:()=>R(I)}),s.jsx(A,{htmlFor:`answer-check-${I}`,className:"font-normal cursor-pointer",children:"Correct"})]}):s.jsx("div",{className:`flex h-9 w-9 items-center justify-center rounded-md border text-sm font-medium transition-colors cursor-pointer
                        ${N.is_correct?"bg-green-500 text-white hover:bg-green-600":"bg-background hover:bg-neutral-100 dark:hover:bg-neutral-800"}`,onClick:()=>R(I),title:N.is_correct?"Correct Answer":"Mark as Correct",children:N.is_correct?s.jsx(Gs,{className:"w-4 h-4"}):s.jsx(Ks,{className:"w-4 h-4"})}),s.jsx(B,{placeholder:`Answer Option ${I+1}`,value:N.text,onChange:Q=>P(I,Q.target.value),required:!0}),s.jsx(T,{type:"button",variant:"destructive",size:"icon",disabled:l.answers.length<=2,onClick:()=>m("answers",l.answers.filter((Q,O)=>O!==I)),children:s.jsx(Le,{className:"w-4 h-4"})})]},N.local_id)),e[93]=P,e[94]=R,e[95]=l.answers,e[96]=l.type,e[97]=m,e[98]=ae):ae=e[98];let re;e[99]!==ae?(re=s.jsx("div",{className:"space-y-3",children:ae}),e[99]=ae,e[100]=re):re=e[100];let ye;e[101]===Symbol.for("react.memo_cache_sentinel")?(ye=s.jsx($e,{className:"w-4 h-4 mr-2"}),e[101]=ye):ye=e[101];let ie;e[102]!==V?(ie=s.jsxs(T,{type:"button",variant:"secondary",onClick:V,children:[ye," Add Answer Option"]}),e[102]=V,e[103]=ie):ie=e[103];const he=C?"Saving...":"Save Question";let le;e[104]!==C||e[105]!==he?(le=s.jsx(T,{type:"submit",disabled:C,className:"w-full",children:he}),e[104]=C,e[105]=he,e[106]=le):le=e[106];let be;return e[107]!==D||e[108]!==K||e[109]!==Z||e[110]!==te||e[111]!==me||e[112]!==re||e[113]!==ie||e[114]!==le?(be=s.jsx(G,{children:s.jsx(ne,{children:s.jsxs("form",{onSubmit:D,className:"space-y-6",children:[K,Z,te,me,re,ie,le]})})}),e[107]=D,e[108]=K,e[109]=Z,e[110]=te,e[111]=me,e[112]=re,e[113]=ie,e[114]=le,e[115]=be):be=e[115],be}function gt(r){console.error("Submission Error:",r)}function bt(r){return r.is_correct&&r.text.trim()!==""}function jt(r){return console.error("Quiz Creation Error:",r)}function vt(r){const e=Ne.c(35),{lessonId:i,quizId:a,lessonTitle:n,onQuizCreated:o,onQuestionSaved:c,existingQuestions:x}=r,[y,v]=M.useState("manage"),[g,f]=M.useState(x),[b,z]=M.useState(null),d=b?"Edit Question":"Add New Question";let p,l;e[0]!==x?(p=()=>{f(x)},l=[x],e[0]=x,e[1]=p,e[2]=l):(p=e[1],l=e[2]),M.useEffect(p,l);let m;e[3]===Symbol.for("react.memo_cache_sentinel")?(m=j=>{z(j),v("add")},e[3]=m):m=e[3];const S=m;let u;e[4]!==c?(u=()=>{z(null),v("manage"),c()},e[4]=c,e[5]=u):u=e[5];const C=u;let _;e[6]!==c?(_=j=>{confirm("Are you sure you want to delete this question?")&&je.delete(route("instructor.quizzes.question.destroy",j),{onSuccess:()=>{W.success("Question deleted successfully!"),c()},preserveScroll:!0})},e[6]=c,e[7]=_):_=e[7];const w=_;let F;e[8]===Symbol.for("react.memo_cache_sentinel")?(F=s.jsxs(_e,{value:"manage",className:"flex items-center",children:[s.jsx(ls,{className:"w-4 h-4 mr-2"})," View/Manage Questions"]}),e[8]=F):F=e[8];let k;e[9]!==b?(k=b?s.jsx(ms,{className:"w-4 h-4 mr-2"}):s.jsx($e,{className:"w-4 h-4 mr-2"}),e[9]=b,e[10]=k):k=e[10];let q;e[11]!==k||e[12]!==d?(q=s.jsxs(zs,{className:"grid w-full grid-cols-2",children:[F,s.jsxs(_e,{value:"add",className:"flex items-center",children:[k,d]})]}),e[11]=k,e[12]=d,e[13]=q):q=e[13];let P;e[14]!==w||e[15]!==g?(P=g.length===0?s.jsx("p",{className:"text-muted-foreground",children:"No questions found for this quiz."}):g.map(j=>s.jsxs("div",{className:"border p-4 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("p",{className:"font-semibold",children:j.text}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs(T,{size:"icon",variant:"outline",title:"Edit",onClick:()=>S(j),children:[" ",s.jsx(ms,{className:"w-4 h-4"})]}),s.jsx(T,{size:"icon",variant:"destructive",onClick:()=>w(j.id),children:s.jsx(Le,{className:"w-4 h-4"})})]})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Answers: ",j.answers.length]})]},j.id)),e[14]=w,e[15]=g,e[16]=P):P=e[16];let E;e[17]===Symbol.for("react.memo_cache_sentinel")?(E=()=>v("add"),e[17]=E):E=e[17];const R=!a;let U;e[18]!==R?(U=s.jsx(T,{onClick:E,disabled:R,className:"w-full",children:"Add First Question"}),e[18]=R,e[19]=U):U=e[19];let V;e[20]!==U||e[21]!==P?(V=s.jsx(ve,{value:"manage",className:"mt-4 max-h-[60vh] overflow-y-auto",children:s.jsx(G,{children:s.jsxs(ne,{className:"space-y-4 pt-4",children:[P,U]})})}),e[20]=U,e[21]=P,e[22]=V):V=e[22];let t;e[23]!==b||e[24]!==C||e[25]!==i||e[26]!==n||e[27]!==o||e[28]!==a?(t=s.jsx(ve,{value:"add",className:"mt-4 max-h-[60vh] overflow-y-auto",children:a?s.jsx(ft,{lessonId:i,quizId:a,lessonTitle:n,initialQuestion:b,onQuizCreated:o,onQuestionSaved:C}):s.jsxs(G,{className:"p-4",children:[s.jsx(ue,{className:"text-lg",children:"Initialize Quiz First"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"You must initialize the Quiz from the main Curriculum tab before you can add questions here."})]})}),e[23]=b,e[24]=C,e[25]=i,e[26]=n,e[27]=o,e[28]=a,e[29]=t):t=e[29];let h;return e[30]!==y||e[31]!==V||e[32]!==t||e[33]!==q?(h=s.jsxs(Ss,{value:y,onValueChange:v,className:"w-full",children:[q,V,t]}),e[30]=y,e[31]=V,e[32]=t,e[33]=q,e[34]=h):h=e[34],h}const Nt=r=>{const e=Ne.c(21),{lessons:i,courseId:a,onUpdate:n,onContentEdit:o}=r,[c,x]=M.useState(!1),[y,v]=M.useState(null),g=wt;let f;e[0]!==n?(f=()=>{x(!1),v(null),n(),W.success("Lesson details saved.")},e[0]=n,e[1]=f):f=e[1];const b=f;let z;e[2]===Symbol.for("react.memo_cache_sentinel")?(z=s.jsxs("div",{children:[s.jsx("h3",{className:"text-2xl font-black tracking-tight",children:"Course Curriculum"}),s.jsx("p",{className:"text-muted-foreground font-medium text-sm",children:"Manage lessons, modules, and learning assessments."})]}),e[2]=z):z=e[2];let d;e[3]===Symbol.for("react.memo_cache_sentinel")?(d=()=>x(!0),e[3]=d):d=e[3];const p=c||!!y;let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx($e,{className:"h-4 w-4 mr-2"}),e[4]=l):l=e[4];let m;e[5]!==p?(m=s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[z,s.jsxs(T,{onClick:d,disabled:p,className:"rounded-full px-6 font-bold shadow-lg shadow-primary/10",children:[l," New Lesson"]})]}),e[5]=p,e[6]=m):m=e[6];let S;e[7]!==a||e[8]!==y||e[9]!==b||e[10]!==c?(S=(c||y)&&s.jsx("div",{className:"animate-in fade-in slide-in-from-top-4 duration-500",children:s.jsx(mt,{courseId:a,lesson:y,onSave:b,onCancel:()=>{x(!1),v(null)}})}),e[7]=a,e[8]=y,e[9]=b,e[10]=c,e[11]=S):S=e[11];let u;e[12]!==i||e[13]!==o?(u=i.length>0?i.sort(_t).map(w=>s.jsx(G,{className:"group border shadow-sm hover:shadow-md transition-all overflow-hidden bg-card/50",children:s.jsx(ne,{className:"p-0",children:s.jsxs("div",{className:"flex flex-col sm:flex-row items-center p-4 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4 shrink-0",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-xl bg-muted font-black text-muted-foreground text-sm border",children:w.order}),s.jsx("div",{className:ze("flex h-10 w-10 items-center justify-center rounded-xl border relative",w.type==="quiz"?"bg-rose-50 text-rose-600 border-rose-100":w.type==="video"?"bg-blue-50 text-blue-600 border-blue-100":"bg-emerald-50 text-emerald-600 border-emerald-100"),children:w.type==="quiz"?s.jsx(Ee,{className:"h-5 w-5"}):w.type==="video"?s.jsx(Me,{className:"h-5 w-5"}):s.jsx(Xs,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"flex-1 min-w-0 text-center sm:text-left",children:[s.jsx("h4",{className:"font-bold text-lg truncate leading-snug",children:w.title}),s.jsxs("div",{className:"flex flex-wrap justify-center sm:justify-start items-center gap-3 mt-1",children:[s.jsx(Se,{variant:"outline",className:"capitalize text-[10px] h-5 px-1.5 font-bold tracking-widest bg-background",children:w.type}),w.is_free_preview&&s.jsx(Se,{className:"bg-green-500 hover:bg-green-600 text-white border-none text-[10px] h-5 px-1.5 font-bold uppercase tracking-widest",children:"Free Preview"})]})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-2 sm:pt-0",children:[s.jsx(T,{variant:"secondary",size:"sm",className:"font-bold h-9 px-4 rounded-lg bg-background border shadow-sm",onClick:()=>o(w),children:"Edit Content"}),s.jsx(T,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-lg hover:bg-primary/10 hover:text-primary",onClick:()=>v(w),children:s.jsx(tt,{className:"w-4 h-4"})}),s.jsx(T,{variant:"ghost",size:"icon",className:"h-9 w-9 rounded-lg hover:bg-destructive/10 hover:text-destructive",onClick:()=>g(w.id),children:s.jsx(Le,{className:"w-4 h-4"})})]})]})})},w.id)):s.jsxs("div",{className:"py-12 border-2 border-dashed rounded-3xl text-center space-y-3 bg-muted/20",children:[s.jsx("div",{className:"mx-auto h-12 w-12 rounded-full bg-muted flex items-center justify-center",children:s.jsx(ls,{className:"h-6 w-6 text-muted-foreground/40"})}),s.jsx("p",{className:"text-muted-foreground font-bold italic",children:"No lessons in this curriculum yet."}),s.jsx(T,{variant:"ghost",className:"text-primary font-black",onClick:()=>x(!0),children:"Create the first lesson"})]}),e[12]=i,e[13]=o,e[14]=u):u=e[14];let C;e[15]!==u?(C=s.jsx("div",{className:"grid gap-3",children:u}),e[15]=u,e[16]=C):C=e[16];let _;return e[17]!==m||e[18]!==S||e[19]!==C?(_=s.jsxs("div",{className:"space-y-6",children:[m,S,C]}),e[17]=m,e[18]=S,e[19]=C,e[20]=_):_=e[20],_};function oa({course:r,categories:e}){const{data:i,setData:a,patch:n,processing:o,errors:c}=Qe({title:r.title||"",title_ar:r.title_ar||"",description:r.description||"",description_ar:r.description_ar||"",category_id:r.category_id?r.category_id.toString():"",price:r.price||0,thumbnail_file:null,preview_video_url:r.preview_video_url||"",preview_video_file:null,learning_outcomes:r.learning_outcomes?.length>0?r.learning_outcomes:[""],learning_outcomes_ar:r.learning_outcomes_ar?.length>0?r.learning_outcomes_ar:[""],discount_percentage:r.discount_percentage||0,discount_start_date:r.discount_start_date?new Date(r.discount_start_date).toISOString().slice(0,16):"",discount_end_date:r.discount_end_date?new Date(r.discount_end_date).toISOString().slice(0,16):""}),[x,y]=M.useState(r.preview_video_url&&!r.preview_video_url.startsWith("courses/")?"url":"upload"),v=t=>{const h=t==="en"?"learning_outcomes":"learning_outcomes_ar";a(h,[...i[h],""])},g=(t,h)=>{const j=t==="en"?"learning_outcomes":"learning_outcomes_ar",D=[...i[j]];D.splice(h,1),a(j,D)},f=(t,h,j)=>{const D=t==="en"?"learning_outcomes":"learning_outcomes_ar",Y=[...i[D]];Y[h]=j,a(D,Y)},[b,z]=M.useState(!1),[d,p]=M.useState(null),[l,m]=M.useState("details"),[S,u]=M.useState(!1),[C,_]=M.useState(0),w=10*1024*1024,F=async()=>{if(!i.preview_video_file){W.error("Please select a video file.");return}const t=i.preview_video_file,h=Math.ceil(t.size/w),j=`course-${r.id}-preview-${t.name}-${t.size}-${Date.now()}`.replace(/[^a-zA-Z0-9]/g,"-");u(!0),_(0);try{for(let D=0;D<h;D++){const Y=D*w,K=Math.min(t.size,Y+w),J=t.slice(Y,K),L=new FormData;L.append("file",J),L.append("file_id",j),L.append("chunk_index",D.toString()),L.append("total_chunks",h.toString()),await Be.post(Ie("instructor.upload_chunk"),L,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:H=>{const X=H.loaded/(H.total||J.size)*100,Z=D/h*100+X/h;_(Math.round(Z))}})}await Be.post(Ie("instructor.finish_course_preview_upload",r.id),{file_id:j,total_chunks:h,original_name:t.name}),W.success("Preview video uploaded successfully."),a("preview_video_file",null),je.reload({only:["course"]})}catch(D){console.error("Upload failed:",D),W.error(D.response?.data?.message||"Upload failed. Please try again.")}finally{u(!1),_(0)}},k=(t,h)=>{t.preventDefault();const j={...i,_method:"patch"};h&&h!=="media_assets"&&(j.thumbnail_file=null,j.preview_video_file=null),je.post(Ie("instructor.courses.update",r.id),j,{onSuccess:()=>{h==="media_assets"&&a(D=>({...D,thumbnail_file:null,preview_video_file:null})),je.reload({only:["course"]}),W.success("Changes saved successfully.")},forceFormData:!0,preserveScroll:!0})},q=()=>{je.reload({only:["course"]})},P=t=>{p(t),z(!0)},E=()=>{z(!1),je.reload({only:["course"]}),W.success("Resource attached successfully.")},R=()=>{z(!1),je.reload({only:["course"],onSuccess:()=>{const t=r.lessons.find(h=>h.id===d.id);t&&t.quiz?.id?(p(t),z(!0),W.success("Quiz created! Let's add some questions.")):q()}})},U=()=>{z(!1),je.reload({only:["course"]})},V=t=>t.quiz?.questions||[];return s.jsxs(Fs,{title:`Edit: ${r.title}`,children:[s.jsx(qs,{title:`Edit: ${r.title}`}),s.jsxs("div",{className:"bg-background min-h-screen pb-20",children:[s.jsx("div",{className:"border-b bg-muted/30 py-8 lg:py-12",children:s.jsxs("div",{className:"container mx-auto px-4",children:[s.jsxs(os,{href:Ie("instructor.courses.index"),className:"flex items-center text-sm font-medium text-muted-foreground hover:text-primary transition-colors",children:[s.jsx(Ws,{className:"mr-2 h-4 w-4"})," Back to Catalog"]}),s.jsxs("div",{className:"mt-8 flex flex-col lg:flex-row lg:items-end justify-between gap-10",children:[s.jsxs("div",{className:"space-y-4 max-w-2xl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Se,{variant:"secondary",className:"px-3 py-1 font-bold text-xs bg-primary/10 text-primary border-primary/20",children:"COURSE BUILDER"}),s.jsx(Se,{variant:"outline",className:ze("px-3 py-1 font-bold text-xs",r.is_published?"text-green-600 bg-green-50 border-green-200":"text-yellow-600 bg-yellow-50 border-yellow-200"),children:r.is_published?"LIVE":"DRAFT"})]}),s.jsx("h1",{className:"text-4xl font-extrabold tracking-tight md:text-5xl leading-tight text-foreground truncate",children:r.title}),s.jsxs("p",{className:"text-muted-foreground text-lg font-medium max-w-xl line-clamp-1",children:["Course ID: ",s.jsxs("span",{className:"text-foreground tracking-widest",children:["#",r.id]})," • ",r.category?.name]}),s.jsx("div",{className:"flex flex-wrap gap-3 pt-4",children:s.jsx(os,{href:Ie("courses.learn",r.slug),target:"_blank",children:s.jsxs(T,{className:"h-11 rounded-full px-6 font-extrabold shadow-lg shadow-primary/20 bg-emerald-600 hover:bg-emerald-700",children:[s.jsx(Ys,{className:"mr-2 h-4 w-4"})," Preview as Student"]})})})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:[s.jsxs(G,{className:"p-4 border-none shadow-sm bg-background flex flex-col items-center justify-center text-center",children:[s.jsx(Ps,{className:"h-5 w-5 mb-1 text-primary"}),s.jsx("span",{className:"text-lg font-black leading-none",children:"1.2k"}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground mt-1",children:"Students"})]}),s.jsxs(G,{className:"p-4 border-none shadow-sm bg-background flex flex-col items-center justify-center text-center",children:[s.jsx(Xe,{className:"h-5 w-5 mb-1 text-green-600"}),s.jsx("span",{className:"text-lg font-black leading-none",children:"USD 4.5k"}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground mt-1",children:"Revenue"})]}),s.jsxs(G,{className:"hidden sm:flex p-4 border-none shadow-sm bg-background flex-col items-center justify-center text-center",children:[s.jsx(ds,{className:"h-5 w-5 mb-1 text-blue-600"}),s.jsx("span",{className:"text-lg font-black leading-none",children:r.lessons.length}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-muted-foreground mt-1",children:"Lessons"})]})]})]})]})}),s.jsx("div",{className:"container mx-auto px-4 py-10",children:s.jsxs(Ss,{value:l,onValueChange:m,className:"w-full",children:[s.jsx("div",{className:"bg-muted/30 p-1.5 rounded-2xl inline-flex mb-8 border backdrop-blur-sm",children:s.jsxs(zs,{className:"bg-transparent h-auto gap-1",children:[s.jsxs(_e,{value:"details",className:"rounded-xl px-5 py-3 font-bold text-sm flex items-center gap-2 transition-all data-[state=active]:bg-background data-[state=active]:shadow-lg data-[state=active]:text-primary",children:[s.jsx(es,{className:"w-4 h-4"})," General"]}),s.jsxs(_e,{value:"classification",className:"rounded-xl px-5 py-3 font-bold text-sm flex items-center gap-2 transition-all data-[state=active]:bg-background data-[state=active]:shadow-lg data-[state=active]:text-primary",children:[s.jsx(us,{className:"w-4 h-4"})," Classification"]}),s.jsxs(_e,{value:"pricing",className:"rounded-xl px-5 py-3 font-bold text-sm flex items-center gap-2 transition-all data-[state=active]:bg-background data-[state=active]:shadow-lg data-[state=active]:text-primary",children:[s.jsx(Xe,{className:"w-4 h-4"})," Pricing"]}),s.jsxs(_e,{value:"media_assets",className:"rounded-xl px-5 py-3 font-bold text-sm flex items-center gap-2 transition-all data-[state=active]:bg-background data-[state=active]:shadow-lg data-[state=active]:text-primary",children:[s.jsx(Me,{className:"w-4 h-4"})," Media"]}),s.jsxs(_e,{value:"curriculum",className:"rounded-xl px-5 py-3 font-bold text-sm flex items-center gap-2 transition-all data-[state=active]:bg-background data-[state=active]:shadow-lg data-[state=active]:text-primary",children:[s.jsx(ls,{className:"w-4 h-4"})," Curriculum"]}),s.jsxs(_e,{value:"quizzes",className:"rounded-xl px-5 py-3 font-bold text-sm flex items-center gap-2 transition-all data-[state=active]:bg-background data-[state=active]:shadow-lg data-[state=active]:text-primary",children:[s.jsx(Ee,{className:"w-4 h-4"})," Assessments"]})]})}),s.jsx(ve,{value:"details",className:"mt-0 animate-in fade-in slide-in-from-left-4 duration-500",children:s.jsxs(G,{className:"border-none shadow-xl",children:[s.jsx(fe,{className:"bg-muted/30 pb-6 rounded-t-xl border-b",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-background text-primary border shadow-sm",children:s.jsx(Ds,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-xl font-bold italic tracking-tight uppercase",children:"Basic Settings"}),s.jsx(Ce,{children:"Fundamental details about the course."})]})]})}),s.jsx(ne,{className:"p-8",children:s.jsxs("form",{onSubmit:t=>k(t,"details"),className:"space-y-8 max-w-4xl",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(A,{htmlFor:"title",className:"text-base font-bold tracking-tight",children:"Title"}),s.jsx(B,{id:"title",className:"h-14 text-lg font-bold border-muted-foreground/20 rounded-xl px-5 bg-muted/10 shadow-inner",value:i.title,onChange:t=>a("title",t.target.value),required:!0}),s.jsx($,{message:c.title})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(A,{htmlFor:"title_ar",className:"text-base font-bold tracking-tight text-right block",children:"Title (Arabic)"}),s.jsx(B,{id:"title_ar",dir:"rtl",className:"h-14 text-lg font-bold border-muted-foreground/20 rounded-xl px-5 bg-muted/10 shadow-inner",value:i.title_ar,onChange:t=>a("title_ar",t.target.value)})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(A,{htmlFor:"description",className:"text-base font-bold tracking-tight",children:"Description"}),s.jsx(Ue,{id:"description",className:"min-h-[160px] text-lg font-medium border-muted-foreground/20 rounded-xl p-5 bg-muted/10 shadow-inner resize-none leading-relaxed",value:i.description,onChange:t=>a("description",t.target.value),required:!0}),s.jsx($,{message:c.description})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(A,{htmlFor:"description_ar",className:"text-base font-bold tracking-tight text-right block",children:"Description (Arabic)"}),s.jsx(Ue,{id:"description_ar",dir:"rtl",className:"min-h-[160px] text-lg font-medium border-muted-foreground/20 rounded-xl p-5 bg-muted/10 shadow-inner resize-none leading-relaxed",value:i.description_ar,onChange:t=>a("description_ar",t.target.value)})]}),s.jsx(Zs,{className:"my-8 border-dashed"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(A,{className:"text-base font-bold tracking-tight",children:"What will students learn?"}),s.jsxs(T,{type:"button",variant:"ghost",size:"sm",className:"text-primary font-bold",onClick:()=>v("en"),children:[s.jsx($e,{className:"w-4 h-4 mr-1"})," Add Outcome"]})]}),s.jsx("div",{className:"space-y-3",children:i.learning_outcomes.map((t,h)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(B,{placeholder:`Outcome #${h+1}`,className:"h-12 border-muted-foreground/20 rounded-xl bg-muted/5 shadow-inner",value:t,onChange:j=>f("en",h,j.target.value)}),i.learning_outcomes.length>1&&s.jsx(T,{type:"button",variant:"ghost",size:"icon",className:"h-12 w-12 rounded-xl text-muted-foreground hover:text-destructive",onClick:()=>g("en",h),children:s.jsx(Le,{className:"w-5 h-5"})})]},h))}),s.jsx($,{message:c.learning_outcomes})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(A,{className:"text-base font-bold tracking-tight text-right block w-full",children:"ماذا سيتعلم الطلاب؟ (بالعربية)"}),s.jsxs(T,{type:"button",variant:"ghost",size:"sm",className:"text-primary font-bold",onClick:()=>v("ar"),children:[s.jsx($e,{className:"w-4 h-4 mr-1"})," إضافة مخرجات"]})]}),s.jsx("div",{className:"space-y-3",children:i.learning_outcomes_ar.map((t,h)=>s.jsxs("div",{className:"flex gap-2",children:[s.jsx(B,{dir:"rtl",placeholder:`المخرج #${h+1}`,className:"h-12 border-muted-foreground/20 rounded-xl bg-muted/5 shadow-inner",value:t,onChange:j=>f("ar",h,j.target.value)}),i.learning_outcomes_ar.length>1&&s.jsx(T,{type:"button",variant:"ghost",size:"icon",className:"h-12 w-12 rounded-xl text-muted-foreground hover:text-destructive",onClick:()=>g("ar",h),children:s.jsx(Le,{className:"w-5 h-5"})})]},h))})]}),s.jsx(T,{type:"submit",size:"lg",disabled:o,className:"h-14 rounded-full px-10 font-black tracking-tight text-lg shadow-xl shadow-primary/20 transition-all hover:scale-105 active:scale-95",children:o?"Saving...":s.jsxs(s.Fragment,{children:[s.jsx(Oe,{className:"mr-2 h-5 w-5"})," Save General Details"]})})]})})]})}),s.jsx(ve,{value:"classification",className:"mt-0 animate-in fade-in slide-in-from-left-4 duration-500",children:s.jsxs(G,{className:"border-none shadow-xl",children:[s.jsx(fe,{className:"bg-muted/30 pb-6 rounded-t-xl border-b",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-background text-primary border shadow-sm",children:s.jsx(us,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-xl font-bold italic tracking-tight uppercase",children:"Classification"}),s.jsx(Ce,{children:"Organize your course in the catalog."})]})]})}),s.jsx(ne,{className:"p-8",children:s.jsxs("form",{onSubmit:t=>k(t,"classification"),className:"space-y-8 max-w-xl",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(A,{htmlFor:"category_id",className:"text-base font-bold tracking-tight",children:"Category"}),s.jsxs(ts,{onValueChange:t=>a("category_id",t),value:i.category_id,children:[s.jsx(as,{id:"category_id",className:"h-14 rounded-xl border-muted-foreground/20 text-lg font-medium px-5 bg-muted/10",children:s.jsx(rs,{placeholder:"Select a Category"})}),s.jsx(is,{className:"rounded-xl",children:e.map(t=>s.jsx(ke,{value:t.id.toString(),className:"text-base py-3",children:t.name},t.id))})]}),s.jsx($,{message:c.category_id})]}),s.jsx(T,{type:"submit",size:"lg",disabled:o,className:"h-14 rounded-full px-10 font-black tracking-tight text-lg shadow-xl shadow-primary/20 transition-all hover:scale-105 active:scale-95",children:o?"Saving...":s.jsxs(s.Fragment,{children:[s.jsx(Oe,{className:"mr-2 h-5 w-5"})," Update Category"]})})]})})]})}),s.jsx(ve,{value:"pricing",className:"mt-0 animate-in fade-in slide-in-from-left-4 duration-500",children:s.jsxs(G,{className:"border-none shadow-xl",children:[s.jsx(fe,{className:"bg-muted/30 pb-6 rounded-t-xl border-b",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-background text-primary border shadow-sm",children:s.jsx(Xe,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-xl font-bold italic tracking-tight uppercase",children:"Pricing & Promotions"}),s.jsx(Ce,{children:"Manage your course value and offers."})]})]})}),s.jsx(ne,{className:"p-8",children:s.jsxs("form",{onSubmit:t=>k(t,"pricing"),className:"space-y-8 max-w-4xl",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(A,{htmlFor:"price",className:"text-base font-bold tracking-tight",children:"Base Price (USD)"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-xl font-black text-muted-foreground",children:"USD"}),s.jsx(B,{id:"price",type:"number",step:"0.01",min:"0",className:"h-14 rounded-xl border-muted-foreground/20 text-xl font-black pl-16 pr-5 bg-muted/10 shadow-inner",value:i.price,onChange:t=>a("price",t.target.value===""?0:parseFloat(t.target.value)),required:!0})]}),s.jsx($,{message:c.price})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(A,{htmlFor:"discount_percentage",className:"text-base font-bold tracking-tight",children:"Discount Percentage (%)"}),s.jsxs("div",{className:"relative",children:[s.jsx(B,{id:"discount_percentage",type:"number",min:"0",max:"100",className:"h-14 rounded-xl border-muted-foreground/20 text-xl font-black px-5 bg-muted/10 shadow-inner",value:i.discount_percentage,onChange:t=>a("discount_percentage",t.target.value===""?0:parseInt(t.target.value))}),s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-xl font-black text-muted-foreground",children:"%"})]}),s.jsx($,{message:c.discount_percentage})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(A,{htmlFor:"discount_start_date",className:"text-base font-bold tracking-tight",children:"Offer Start"}),s.jsx(B,{id:"discount_start_date",type:"datetime-local",className:"h-14 rounded-xl border-muted-foreground/20 font-medium px-5 bg-muted/10 shadow-inner",value:i.discount_start_date,onChange:t=>a("discount_start_date",t.target.value)})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(A,{htmlFor:"discount_end_date",className:"text-base font-bold tracking-tight",children:"Offer End"}),s.jsx(B,{id:"discount_end_date",type:"datetime-local",className:"h-14 rounded-xl border-muted-foreground/20 font-medium px-5 bg-muted/10 shadow-inner",value:i.discount_end_date,onChange:t=>a("discount_end_date",t.target.value)})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(A,{className:"text-base font-bold tracking-tight",children:"Final Price"}),s.jsxs("div",{className:"h-14 flex items-center px-5 rounded-xl bg-green-50 border border-green-100 text-green-700 font-black text-xl",children:["USD ",(i.price*(1-i.discount_percentage/100)).toFixed(2)]})]})]}),s.jsx(T,{type:"submit",size:"lg",disabled:o,className:"h-14 rounded-full px-10 font-black tracking-tight text-lg shadow-xl shadow-primary/20 transition-all hover:scale-105 active:scale-95",children:o?"Saving...":s.jsxs(s.Fragment,{children:[s.jsx(Oe,{className:"mr-2 h-5 w-5"})," Update Pricing"]})})]})})]})}),s.jsx(ve,{value:"media_assets",className:"mt-0 animate-in fade-in slide-in-from-left-4 duration-500",children:s.jsxs(G,{className:"border-none shadow-xl",children:[s.jsx(fe,{className:"bg-muted/30 pb-6 rounded-t-xl border-b",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-background text-primary border shadow-sm",children:s.jsx(es,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-xl font-bold italic tracking-tight uppercase",children:"Media & Preview"}),s.jsx(Ce,{children:"Visual assets for your course."})]})]})}),s.jsx(ne,{className:"p-8",children:s.jsx("div",{className:"space-y-10 max-w-4xl",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx(A,{className:"text-base font-bold tracking-tight",children:"Course Thumbnail"}),s.jsxs("div",{className:"aspect-video rounded-2xl overflow-hidden border-2 border-dashed border-muted-foreground/20 relative group",children:[r.thumbnail_url?s.jsx("img",{src:r.thumbnail_url,alt:"Course Thumbnail",className:"w-full h-full object-cover"}):s.jsxs("div",{className:"w-full h-full bg-muted/20 flex flex-col items-center justify-center text-muted-foreground",children:[s.jsx(es,{className:"w-10 h-10 mb-2 opacity-20"}),s.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"No Thumbnail"})]}),s.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:s.jsx(A,{htmlFor:"thumbnail_file",className:"cursor-pointer bg-white text-black px-4 py-2 rounded-full font-bold text-xs",children:"Change Image"})})]}),s.jsx(B,{id:"thumbnail_file",type:"file",accept:"image/*",className:"hidden",onChange:t=>a("thumbnail_file",t.target.files?t.target.files[0]:null)}),i.thumbnail_file&&s.jsxs("div",{className:"flex items-center justify-between bg-primary/5 p-3 rounded-xl border border-primary/20",children:[s.jsxs("p",{className:"text-xs font-bold text-primary flex items-center gap-2",children:[s.jsx(ds,{className:"w-4 h-4"})," ",i.thumbnail_file.name]}),s.jsx(T,{size:"sm",onClick:t=>k(t,"media_assets"),disabled:o,className:"h-8 rounded-lg text-[10px] font-black uppercase",children:o?"Saving...":"Upload Now"})]}),s.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"Recommended: 1280x720px (JPG/PNG). Max 5MB."}),s.jsx($,{message:c.thumbnail_file})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(A,{className:"text-base font-bold tracking-tight",children:"Preview Video"}),s.jsxs("div",{className:"flex bg-muted/20 p-1 rounded-lg border",children:[s.jsxs(T,{type:"button",variant:x==="url"?"secondary":"ghost",size:"sm",className:"h-8 text-[10px] font-black uppercase tracking-widest rounded-md",onClick:()=>y("url"),children:[s.jsx(Js,{className:"w-3 h-3 mr-1"})," URL"]}),s.jsxs(T,{type:"button",variant:x==="upload"?"secondary":"ghost",size:"sm",className:"h-8 text-[10px] font-black uppercase tracking-widest rounded-md",onClick:()=>y("upload"),children:[s.jsx(Me,{className:"w-3 h-3 mr-1"})," Upload"]})]})]}),x==="url"?s.jsx("div",{className:"space-y-3 animate-in fade-in duration-300",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(B,{id:"preview_video_url",placeholder:"YouTube / Vimeo Link",className:"h-14 text-lg font-medium border-muted-foreground/20 rounded-xl px-5 bg-muted/10 shadow-inner",value:i.preview_video_url,onChange:t=>a("preview_video_url",t.target.value)}),s.jsx(T,{onClick:t=>k(t,"media_assets"),disabled:o,className:"h-14 rounded-xl px-6 font-bold",children:s.jsx(Oe,{className:"w-4 h-4"})})]})}):s.jsxs("div",{className:"space-y-3 animate-in fade-in duration-300",children:[s.jsx(B,{id:"preview_video_file",type:"file",accept:"video/*",className:"h-14 pt-3 text-lg font-medium border-muted-foreground/20 rounded-xl px-5 bg-muted/10 cursor-pointer",onChange:t=>a("preview_video_file",t.target.files?t.target.files[0]:null),disabled:S}),S&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-[10px] font-black uppercase tracking-widest",children:[s.jsx("span",{children:"Uploading..."}),s.jsxs("span",{children:[C,"%"]})]}),s.jsx(ps,{value:C,className:"h-2"})]}),i.preview_video_file&&!S&&s.jsxs(T,{className:"w-full h-12 rounded-xl font-bold bg-primary shadow-lg",onClick:F,children:[s.jsx(fs,{className:"w-4 h-4 mr-2"})," Start Chunked Upload (60MB+)"]}),r.preview_video_url&&r.preview_video_url.startsWith("courses/")&&!S&&s.jsx("p",{className:"text-[10px] font-bold text-emerald-600 bg-emerald-50 px-3 py-1 rounded-full w-fit",children:"Current: Video Uploaded"})]}),s.jsx($,{message:c.preview_video_url||c.preview_video_file}),s.jsx("p",{className:"text-xs text-muted-foreground font-medium",children:"A teaser video shown to non-enrolled students. Max 100MB."})]})]})})})]})}),s.jsx(ve,{value:"curriculum",className:"mt-0 animate-in fade-in slide-in-from-right-4 duration-500",children:s.jsxs(G,{className:"border-none shadow-xl overflow-hidden",children:[s.jsx(fe,{className:"bg-muted/30 pb-6 rounded-t-xl border-b",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-background text-primary border shadow-sm",children:s.jsx(cs,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-xl font-bold italic tracking-tight uppercase",children:"Structure Editor"}),s.jsx(Ce,{children:"Drag, drop, and refine your learning path."})]})]})}),s.jsx(ne,{className:"p-8",children:s.jsx(Nt,{lessons:r.lessons,courseId:r.id,onUpdate:q,onContentEdit:P})})]})}),s.jsx(ve,{value:"content_audit",className:"mt-0 animate-in fade-in slide-in-from-bottom-4 duration-500",children:s.jsxs(G,{className:"border-none shadow-xl",children:[s.jsx(fe,{className:"bg-muted/30 pb-6 rounded-t-xl border-b",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-background text-primary border shadow-sm",children:s.jsx(Me,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-xl font-bold italic tracking-tight uppercase",children:"Content Audit"}),s.jsx(Ce,{children:"Verification of all attached learning resources."})]})]})}),s.jsxs(ne,{className:"p-8",children:[s.jsxs("p",{className:"text-muted-foreground mb-10 font-medium bg-blue-50 dark:bg-blue-900/20 p-4 rounded-xl border border-blue-100 dark:border-blue-800 text-sm",children:[s.jsx(Ee,{className:"inline h-4 w-4 mr-2 mb-0.5 text-blue-600"}),"All media management is integrated directly within the **Curriculum Builder** tab for a seamless experience."]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.lessons.map(t=>s.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-2xl bg-muted/10 group hover:border-primary/30 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"h-8 w-8 rounded-full bg-background border flex items-center justify-center text-[10px] font-black",children:t.order}),s.jsx("span",{className:"font-bold",children:t.title})]}),s.jsx(Se,{variant:"outline",className:ze("h-7 px-3 rounded-full text-[10px] font-bold tracking-widest uppercase",t.video?.path||t.downloadable_path?"bg-green-50 text-green-600 border-green-200":"bg-muted text-muted-foreground border-muted-foreground/10"),children:t.video?.path||t.downloadable_path?"Resource Ready":"Empty"})]},t.id))})]})]})}),s.jsx(ve,{value:"quizzes",className:"mt-0 animate-in fade-in slide-in-from-bottom-4 duration-500",children:s.jsxs(G,{className:"border-none shadow-xl",children:[s.jsx(fe,{className:"bg-muted/30 pb-6 rounded-t-xl border-b",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 rounded-lg bg-background text-primary border shadow-sm",children:s.jsx(Ee,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx(ue,{className:"text-xl font-bold italic tracking-tight uppercase",children:"Master Assessments"}),s.jsx(Ce,{children:"Validate Student Knowledge."})]})]})}),s.jsx(ne,{className:"p-8",children:s.jsx("div",{className:"space-y-6",children:r.lessons.map(t=>s.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl border bg-muted/10 hover:bg-muted/20 transition-colors",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-bold text-sm tracking-tight",children:t.title}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Se,{variant:"outline",className:"text-[10px] font-bold uppercase tracking-wider",children:t.quiz?"Has Assessment":"No Assessment"}),t.quiz&&s.jsxs(Se,{variant:"secondary",className:"text-[10px] font-bold uppercase tracking-wider bg-primary/10 text-primary border-primary/20",children:[t.quiz.questions?.length||0," Questions"]})]})]}),s.jsx(T,{size:"sm",variant:"ghost",onClick:()=>P(t),className:"rounded-lg font-bold text-xs hover:bg-primary hover:text-white transition-all",children:t.quiz?"Edit Assessment":"Setup Assessment"})]},t.id))})})]})})]})})]}),s.jsx($s,{open:b,onOpenChange:z,children:s.jsxs(Rs,{className:"max-w-4xl p-0 border-none rounded-3xl overflow-hidden shadow-3xl overflow-y-auto max-h-[90vh]",children:[s.jsxs(Vs,{className:"p-8 bg-primary text-primary-foreground",children:[s.jsxs(Os,{className:"text-2xl font-black tracking-tight flex items-center gap-3 uppercase",children:[s.jsx(cs,{className:"h-6 w-6"})," Editing Resource: ",d?.title]}),s.jsxs("p",{className:"text-primary-foreground/70 font-medium italic mt-1",children:["Refining content for Lesson ",d?.order]})]}),s.jsx("div",{className:"p-8 bg-card",children:d&&d.type==="text"?s.jsx(xt,{lessonId:d.id,initialContent:d.description||"",initialTitle:d.title||"Untitled Lesson",initialOrder:d.order||0,initialIsFreePreview:d.is_free_preview||!1,onSave:()=>{z(!1),q()}}):d&&["video","downloadable"].includes(d.type)?s.jsx(ut,{lessonId:d.id,lessonType:d.type,onUploadSuccess:E}):d?.type==="quiz"?s.jsx(vt,{lessonId:d.id,quizId:d.quiz?.id||null,lessonTitle:d.title,existingQuestions:V(d),onQuizCreated:R,onQuestionSaved:U}):s.jsxs("div",{className:"py-20 text-center",children:[s.jsx(Ee,{className:"h-12 w-12 mx-auto text-muted-foreground/20 mb-4"}),s.jsx("p",{className:"text-muted-foreground font-bold italic",children:"Lesson configuration incomplete."})]})})]})})]})}function yt(){return W.success("Lesson deleted successfully.")}function wt(r){confirm("Are you sure you want to delete this lesson? All associated content will be lost.")&&je.delete(Ie("instructor.lessons.destroy",r),{onSuccess:yt,preserveScroll:!0})}function _t(r,e){return r.order-e.order}export{oa as default};
